<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<title>Class Horde_Alarm</title>

	<link rel="stylesheet" href="resources/style.css?1648332946">

</head>

<body>
<div id="left">
	<div id="menu">
		<a href="index.html" title="Overview"><span>Overview</span></a>


		<div id="groups">
			<h3>Packages</h3>
			<ul>
				<li class="active"><a href="namespace-Alarm.html">Alarm</a>
						</li>
			</ul>
		</div>

		<hr>


		<div id="elements">
			<h3>Classes</h3>
			<ul>
				<li class="active"><a href="class-Horde_Alarm.html">Horde_Alarm</a></li>
				<li><a href="class-Horde_Alarm_Exception.html">Horde_Alarm_Exception</a></li>
				<li><a href="class-Horde_Alarm_Handler.html">Horde_Alarm_Handler</a></li>
				<li><a href="class-Horde_Alarm_Handler_Desktop.html">Horde_Alarm_Handler_Desktop</a></li>
				<li><a href="class-Horde_Alarm_Handler_Mail.html">Horde_Alarm_Handler_Mail</a></li>
				<li><a href="class-Horde_Alarm_Handler_Notify.html">Horde_Alarm_Handler_Notify</a></li>
				<li><a href="class-Horde_Alarm_Null.html">Horde_Alarm_Null</a></li>
				<li><a href="class-Horde_Alarm_Object.html">Horde_Alarm_Object</a></li>
				<li><a href="class-Horde_Alarm_Sql.html">Horde_Alarm_Sql</a></li>
				<li><a href="class-Horde_Alarm_Translation.html">Horde_Alarm_Translation</a></li>
			</ul>





		</div>
	</div>
</div>

<div id="splitter"></div>

<div id="right">
<div id="rightInner">
	<form id="search">
		<input type="hidden" name="cx" value="">
		<input type="hidden" name="ie" value="UTF-8">
		<input type="text" name="q" class="text" placeholder="Search">
	</form>

	<div id="navigation">
		<ul>
			<li>
				<a href="index.html" title="Overview"><span>Overview</span></a>
			</li>
			<li>
				<a href="package-Alarm.html" title="Summary of Alarm"><span>Package</span></a>
			</li>
			<li class="active">
<span>Class</span>			</li>
		</ul>
		<ul>
			<li>
				<a href="tree.html" title="Tree view of classes, interfaces, traits and exceptions"><span>Tree</span></a>
			</li>
		</ul>
		<ul>
		</ul>
	</div>

<div id="content" class="class">
	<h1>Class Horde_Alarm</h1>


	<div class="description">
	<p>The Horde_Alarm:: class provides an interface to deal with reminders,
alarms and notifications through a standardized API.</p>

	</div>



	<div>
		<h4>Direct known subclasses</h4>
			<a href="class-Horde_Alarm_Null.html">Horde_Alarm_Null</a>, 
			<a href="class-Horde_Alarm_Object.html">Horde_Alarm_Object</a>, 
			<a href="class-Horde_Alarm_Sql.html">Horde_Alarm_Sql</a>
	</div>






	<div class="info">
		<b>Abstract</b><br>
		
		
		<b>Package:</b> Alarm<br>

				<b>Author:</b>
				Jan Schneider <a href="&#109;&#97;&#105;&#108;&#x74;&#x6f;&#x3a;j&#97;&#110;&#64;&#x68;&#x6f;&#x72;&#x64;e&#46;&#111;&#114;&#x67;">j&#97;&#110;&#64;&#x68;&#x6f;&#x72;&#x64;e&#46;&#111;&#114;&#x67;</a>
<br>
		<b>Located at</b> <a href="source-class-Horde_Alarm.html#11-522" title="Go to source code">Horde/Alarm.php</a><br>
	</div>



	<table class="summary methods" id="methods">
	<caption>Methods summary</caption>
	<tr data-order="__construct" id="___construct">

		<td class="attributes"><code>
			 public 

			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#___construct">#</a>
		<code><a href="source-class-Horde_Alarm.html#57-77" title="Go to source code">__construct</a>( <span>array <var>$params</var> = <span class="php-keyword1">array</span>()</span> )</code>

		<div class="description short">
			<p>Constructor.</p>

		</div>

		<div class="description detailed hidden">
			<p>Constructor.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$params</var></dt>
					<dd>Configuration parameters:

&lt;pre&gt;&lt;span class="php-quote"&gt;'logger'&lt;/span&gt; - (Horde_Log_Logger) A logger instance.
&lt;span class="php-quote"&gt;'ttl'&lt;/span&gt; - (integer) &lt;span class="php-keyword2"&gt;Time&lt;/span&gt; to live value, in seconds.&lt;/pre&gt;
</dd>
				</dl></div>





		</div>
		</div></td>
	</tr>
	<tr data-order="listAlarms" id="_listAlarms">

		<td class="attributes"><code>
			 public 

			array
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_listAlarms">#</a>
		<code><a href="source-class-Horde_Alarm.html#79-111" title="Go to source code">listAlarms</a>( <span>string <var>$user</var> = <span class="php-keyword1">null</span></span>, <span>Horde_Date <var>$time</var> = <span class="php-keyword1">null</span></span>, <span>boolean <var>$load</var> = <span class="php-keyword1">false</span></span>, <span>boolean <var>$preload</var> = <span class="php-keyword1">true</span></span> )</code>

		<div class="description short">
			<p>Returns a list of alarms from the backend.</p>

		</div>

		<div class="description detailed hidden">
			<p>Returns a list of alarms from the backend.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$user</var></dt>
					<dd>&lt;p&gt;Return alarms for this user, all users if
                         null, or global alarms if empty.&lt;/p&gt;
</dd>
					<dt><var>$time</var></dt>
					<dd>&lt;p&gt;The time when the alarms should be active.
                         Defaults to now.&lt;/p&gt;
</dd>
					<dt><var>$load</var></dt>
					<dd>Update active alarms from all applications?
</dd>
					<dt><var>$preload</var></dt>
					<dd>&lt;p&gt;Preload alarms that go off within the next
                         ttl time span?&lt;/p&gt;
</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>array</code><br>A list of alarm hashes.

				</div>

				<h4>Throws</h4>
				<div class="list">
					<code><a href="class-Horde_Alarm_Exception.html">Horde_Alarm_Exception</a></code>
				</div>



		</div>
		</div></td>
	</tr>
	<tr data-order="globalAlarms" id="_globalAlarms">

		<td class="attributes"><code>
			 public 

			array
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_globalAlarms">#</a>
		<code><a href="source-class-Horde_Alarm.html#125-140" title="Go to source code">globalAlarms</a>( )</code>

		<div class="description short">
			<p>Returns a list of all global alarms from the backend.</p>

		</div>

		<div class="description detailed hidden">
			<p>Returns a list of all global alarms from the backend.</p>




				<h4>Returns</h4>
				<div class="list">
					<code>array</code><br>A list of alarm hashes.

				</div>

				<h4>Throws</h4>
				<div class="list">
					<code><a href="class-Horde_Alarm_Exception.html">Horde_Alarm_Exception</a></code>
				</div>



		</div>
		</div></td>
	</tr>
	<tr data-order="get" id="_get">

		<td class="attributes"><code>
			 public 

			array
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_get">#</a>
		<code><a href="source-class-Horde_Alarm.html#149-179" title="Go to source code">get</a>( <span>string <var>$id</var></span>, <span>string <var>$user</var></span> )</code>

		<div class="description short">
			<p>Returns an alarm hash from the backend.</p>

		</div>

		<div class="description detailed hidden">
			<p>Returns an alarm hash from the backend.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$id</var></dt>
					<dd>The alarm's unique id.
</dd>
					<dt><var>$user</var></dt>
					<dd>The alarm's user
</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>array</code><br>An alarm hash. Contains the following:

<pre>id: Unique alarm id.
user: The alarm<span class="php-quote">'s user. Empty if a global alarm.
start: The alarm start as a Horde_Date.
end: The alarm end as a Horde_Date.
methods: The notification methods for this alarm.
params: The paramters for the notification methods.
title: The alarm title.
text: An optional alarm description.
snooze: The snooze time (next time) of the alarm as a Horde_Date.
internal: Holds internally used data.</span></pre>

				</div>

				<h4>Throws</h4>
				<div class="list">
					<code><a href="class-Horde_Alarm_Exception.html">Horde_Alarm_Exception</a></code>
				</div>



		</div>
		</div></td>
	</tr>
	<tr data-order="set" id="_set">

		<td class="attributes"><code>
			 public 

			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_set">#</a>
		<code><a href="source-class-Horde_Alarm.html#192-221" title="Go to source code">set</a>( <span>array <var>$alarm</var></span>, <span>boolean <var>$keep</var> = <span class="php-keyword1">false</span></span> )</code>

		<div class="description short">
			<p>Stores an alarm hash in the backend.</p>

		</div>

		<div class="description detailed hidden">
			<p>Stores an alarm hash in the backend.</p>

<p>The alarm will be added if it doesn't exist, and updated otherwise.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$alarm</var></dt>
					<dd>An alarm hash. See self::get() for format.
</dd>
					<dt><var>$keep</var></dt>
					<dd>&lt;p&gt;Whether to keep the snooze value and notification
                      status unchanged. If true, the alarm will get
                      "un-snoozed", and notifications (like mails) are
                      sent again.&lt;/p&gt;
</dd>
				</dl></div>


				<h4>Throws</h4>
				<div class="list">
					<code><a href="class-Horde_Alarm_Exception.html">Horde_Alarm_Exception</a></code>
				</div>



		</div>
		</div></td>
	</tr>
	<tr data-order="internal" id="_internal">

		<td class="attributes"><code>
			abstract public 

			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_internal">#</a>
		<code><a href="source-class-Horde_Alarm.html#242-252" title="Go to source code">internal</a>( <span>string <var>$id</var></span>, <span>string <var>$user</var></span>, <span>array <var>$internal</var></span> )</code>

		<div class="description short">
			<p>Updates internal alarm properties, i.e. properties not determined by
the application setting the alarm.</p>

		</div>

		<div class="description detailed hidden">
			<p>Updates internal alarm properties, i.e. properties not determined by
the application setting the alarm.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$id</var></dt>
					<dd>The alarm's unique id.
</dd>
					<dt><var>$user</var></dt>
					<dd>The alarm's user
</dd>
					<dt><var>$internal</var></dt>
					<dd>A hash with the internal data.
</dd>
				</dl></div>


				<h4>Throws</h4>
				<div class="list">
					<code><a href="class-Horde_Alarm_Exception.html">Horde_Alarm_Exception</a></code>
				</div>



		</div>
		</div></td>
	</tr>
	<tr data-order="exists" id="_exists">

		<td class="attributes"><code>
			 public 

			boolean
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_exists">#</a>
		<code><a href="source-class-Horde_Alarm.html#254-269" title="Go to source code">exists</a>( <span>string <var>$id</var></span>, <span>string <var>$user</var></span> )</code>

		<div class="description short">
			<p>Returns whether an alarm with the given id exists already.</p>

		</div>

		<div class="description detailed hidden">
			<p>Returns whether an alarm with the given id exists already.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$id</var></dt>
					<dd>The alarm's unique id.
</dd>
					<dt><var>$user</var></dt>
					<dd>The alarm's user
</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>boolean</code><br>True if the specified alarm exists.

				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="snooze" id="_snooze">

		<td class="attributes"><code>
			 public 

			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_snooze">#</a>
		<code><a href="source-class-Horde_Alarm.html#282-310" title="Go to source code">snooze</a>( <span>string <var>$id</var></span>, <span>string <var>$user</var></span>, <span>integer <var>$minutes</var></span> )</code>

		<div class="description short">
			<p>Delays (snoozes) an alarm for a certain period.</p>

		</div>

		<div class="description detailed hidden">
			<p>Delays (snoozes) an alarm for a certain period.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$id</var></dt>
					<dd>The alarm's unique id.
</dd>
					<dt><var>$user</var></dt>
					<dd>The notified user.
</dd>
					<dt><var>$minutes</var></dt>
					<dd>&lt;p&gt;The delay in minutes. A negative value
                         dismisses the alarm completely.&lt;/p&gt;
</dd>
				</dl></div>


				<h4>Throws</h4>
				<div class="list">
					<code><a href="class-Horde_Alarm_Exception.html">Horde_Alarm_Exception</a></code>
				</div>



		</div>
		</div></td>
	</tr>
	<tr data-order="isSnoozed" id="_isSnoozed">

		<td class="attributes"><code>
			 public 

			boolean
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_isSnoozed">#</a>
		<code><a href="source-class-Horde_Alarm.html#323-341" title="Go to source code">isSnoozed</a>( <span>string <var>$id</var></span>, <span>string <var>$user</var></span>, <span>Horde_Date <var>$time</var> = <span class="php-keyword1">null</span></span> )</code>

		<div class="description short">
			<p>Returns whether an alarm is snoozed.</p>

		</div>

		<div class="description detailed hidden">
			<p>Returns whether an alarm is snoozed.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$id</var></dt>
					<dd>The alarm's unique id.
</dd>
					<dt><var>$user</var></dt>
					<dd>The alarm's user
</dd>
					<dt><var>$time</var></dt>
					<dd>&lt;p&gt;The time when the alarm may be snoozed.
                         Defaults to now.&lt;/p&gt;
</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>boolean</code><br>True if the alarm is snoozed.

				</div>

				<h4>Throws</h4>
				<div class="list">
					<code><a href="class-Horde_Alarm_Exception.html">Horde_Alarm_Exception</a></code>
				</div>



		</div>
		</div></td>
	</tr>
	<tr data-order="delete" id="_delete">

		<td class="attributes"><code>
			 public 

			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_delete">#</a>
		<code><a href="source-class-Horde_Alarm.html#365-376" title="Go to source code">delete</a>( <span>string <var>$id</var></span>, <span>string <var>$user</var> = <span class="php-keyword1">null</span></span> )</code>

		<div class="description short">
			<p>Deletes an alarm from the backend.</p>

		</div>

		<div class="description detailed hidden">
			<p>Deletes an alarm from the backend.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$id</var></dt>
					<dd>The alarm's unique id.
</dd>
					<dt><var>$user</var></dt>
					<dd>The alarm's user. All users' alarms if null.
</dd>
				</dl></div>


				<h4>Throws</h4>
				<div class="list">
					<code><a href="class-Horde_Alarm_Exception.html">Horde_Alarm_Exception</a></code>
				</div>



		</div>
		</div></td>
	</tr>
	<tr data-order="notify" id="_notify">

		<td class="attributes"><code>
			 public 

			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_notify">#</a>
		<code><a href="source-class-Horde_Alarm.html#388-425" title="Go to source code">notify</a>( <span>string <var>$user</var> = <span class="php-keyword1">null</span></span>, <span>boolean <var>$load</var> = <span class="php-keyword1">true</span></span>, <span>boolean <var>$preload</var> = <span class="php-keyword1">true</span></span>, <span>array <var>$exclude</var> = <span class="php-keyword1">array</span>()</span> )</code>

		<div class="description short">
			<p>Notifies the user about any active alarms.</p>

		</div>

		<div class="description detailed hidden">
			<p>Notifies the user about any active alarms.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$user</var></dt>
					<dd>&lt;p&gt;Notify this user, all users if null, or guest
                         users if empty.&lt;/p&gt;
</dd>
					<dt><var>$load</var></dt>
					<dd>Update active alarms from all applications?
</dd>
					<dt><var>$preload</var></dt>
					<dd>&lt;p&gt;Preload alarms that go off within the next
                         ttl time span?&lt;/p&gt;
</dd>
					<dt><var>$exclude</var></dt>
					<dd>Don't notify with these methods.
</dd>
				</dl></div>


				<h4>Throws</h4>
				<div class="list">
					<code><a href="class-Horde_Alarm_Exception.html">Horde_Alarm_Exception</a></code>
				</div>



		</div>
		</div></td>
	</tr>
	<tr data-order="addHandler" id="_addHandler">

		<td class="attributes"><code>
			 public 

			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_addHandler">#</a>
		<code><a href="source-class-Horde_Alarm.html#427-437" title="Go to source code">addHandler</a>( <span>string <var>$name</var></span>, <span><code><a href="class-Horde_Alarm_Handler.html">Horde_Alarm_Handler</a></code> <var>$handler</var></span> )</code>

		<div class="description short">
			<p>Registers a notification handler.</p>

		</div>

		<div class="description detailed hidden">
			<p>Registers a notification handler.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$name</var></dt>
					<dd>A handler name.
</dd>
					<dt><var>$handler</var></dt>
					<dd>A notification handler.
</dd>
				</dl></div>





		</div>
		</div></td>
	</tr>
	<tr data-order="handlers" id="_handlers">

		<td class="attributes"><code>
			 public 

			array
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_handlers">#</a>
		<code><a href="source-class-Horde_Alarm.html#439-472" title="Go to source code">handlers</a>( )</code>

		<div class="description short">
			<p>Returns a list of available notification handlers and parameters.</p>

		</div>

		<div class="description detailed hidden">
			<p>Returns a list of available notification handlers and parameters.</p>

<p>The returned list is a hash with method names as the keys and
optionally associated parameters as values. The parameters are hashes
again with parameter names as keys and parameter information as
values. The parameter information is hash with the following keys:
'desc' contains a parameter description; 'required' specifies whether
this parameter is required.</p>




				<h4>Returns</h4>
				<div class="list">
					<code>array</code><br>List of methods and parameters.

				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="gc" id="_gc">

		<td class="attributes"><code>
			 public 

			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_gc">#</a>
		<code><a href="source-class-Horde_Alarm.html#474-488" title="Go to source code">gc</a>( <span>boolean <var>$force</var> = <span class="php-keyword1">false</span></span> )</code>

		<div class="description short">
			<p>Garbage collects old alarms in the backend.</p>

		</div>

		<div class="description detailed hidden">
			<p>Garbage collects old alarms in the backend.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$force</var></dt>
					<dd>&lt;p&gt;Force garbace collection? If false, GC happens
                       with a 1% chance.&lt;/p&gt;
</dd>
				</dl></div>


				<h4>Throws</h4>
				<div class="list">
					<code><a href="class-Horde_Alarm_Exception.html">Horde_Alarm_Exception</a></code>
				</div>



		</div>
		</div></td>
	</tr>
	<tr data-order="initialize" id="_initialize">

		<td class="attributes"><code>
			abstract public 

			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_initialize">#</a>
		<code><a href="source-class-Horde_Alarm.html#497-502" title="Go to source code">initialize</a>( )</code>

		<div class="description short">
			<p>Attempts to initialize the backend.</p>

		</div>

		<div class="description detailed hidden">
			<p>Attempts to initialize the backend.</p>





				<h4>Throws</h4>
				<div class="list">
					<code><a href="class-Horde_Alarm_Exception.html">Horde_Alarm_Exception</a></code>
				</div>



		</div>
		</div></td>
	</tr>
	</table>


















</div>

	<div id="footer">
		 API documentation generated by <a href="http://apigen.org">ApiGen</a>
	</div>
</div>
</div>
<script src="resources/combined.js?721046668"></script>
<script src="elementlist.js?1446079934"></script>
</body>
</html>

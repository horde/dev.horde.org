<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<title>Class Horde_Imap_Client_Utils</title>

	<link rel="stylesheet" href="resources/style.css?1648332946">

</head>

<body>
<div id="left">
	<div id="menu">
		<a href="index.html" title="Overview"><span>Overview</span></a>


		<div id="groups">
			<h3>Packages</h3>
			<ul>
				<li class="active"><a href="namespace-Imap.html">Imap<span></span></a>
						<ul>
				<li class="active"><a href="namespace-Imap.Client.html">Client</a>
						</li>
							</ul></li>
			</ul>
		</div>

		<hr>


		<div id="elements">
			<h3>Classes</h3>
			<ul>
				<li><a href="class-Horde_Imap_Client.html">Horde_Imap_Client</a></li>
				<li><a href="class-Horde_Imap_Client_Auth_DigestMD5.html">Horde_Imap_Client_Auth_DigestMD5</a></li>
				<li><a href="class-Horde_Imap_Client_Base.html">Horde_Imap_Client_Base</a></li>
				<li><a href="class-Horde_Imap_Client_Cache.html">Horde_Imap_Client_Cache</a></li>
				<li><a href="class-Horde_Imap_Client_Data_Acl.html">Horde_Imap_Client_Data_Acl</a></li>
				<li><a href="class-Horde_Imap_Client_Data_AclCommon.html">Horde_Imap_Client_Data_AclCommon</a></li>
				<li><a href="class-Horde_Imap_Client_Data_AclNegative.html">Horde_Imap_Client_Data_AclNegative</a></li>
				<li><a href="class-Horde_Imap_Client_Data_AclRights.html">Horde_Imap_Client_Data_AclRights</a></li>
				<li><a href="class-Horde_Imap_Client_Data_Envelope.html">Horde_Imap_Client_Data_Envelope</a></li>
				<li><a href="class-Horde_Imap_Client_Data_Fetch.html">Horde_Imap_Client_Data_Fetch</a></li>
				<li><a href="class-Horde_Imap_Client_Data_Fetch_Pop3.html">Horde_Imap_Client_Data_Fetch_Pop3</a></li>
				<li><a href="class-Horde_Imap_Client_Data_Thread.html">Horde_Imap_Client_Data_Thread</a></li>
				<li><a href="class-Horde_Imap_Client_DateTime.html">Horde_Imap_Client_DateTime</a></li>
				<li><a href="class-Horde_Imap_Client_Exception.html">Horde_Imap_Client_Exception</a></li>
				<li><a href="class-Horde_Imap_Client_Exception_NoSupportExtension.html">Horde_Imap_Client_Exception_NoSupportExtension</a></li>
				<li><a href="class-Horde_Imap_Client_Fetch_Query.html">Horde_Imap_Client_Fetch_Query</a></li>
				<li><a href="class-Horde_Imap_Client_Ids.html">Horde_Imap_Client_Ids</a></li>
				<li><a href="class-Horde_Imap_Client_Ids_Pop3.html">Horde_Imap_Client_Ids_Pop3</a></li>
				<li><a href="class-Horde_Imap_Client_Mailbox.html">Horde_Imap_Client_Mailbox</a></li>
				<li><a href="class-Horde_Imap_Client_Search_Query.html">Horde_Imap_Client_Search_Query</a></li>
				<li><a href="class-Horde_Imap_Client_Socket.html">Horde_Imap_Client_Socket</a></li>
				<li><a href="class-Horde_Imap_Client_Socket_Pop3.html">Horde_Imap_Client_Socket_Pop3</a></li>
				<li><a href="class-Horde_Imap_Client_Sort.html">Horde_Imap_Client_Sort</a></li>
				<li><a href="class-Horde_Imap_Client_Translation.html">Horde_Imap_Client_Translation</a></li>
				<li><a href="class-Horde_Imap_Client_Utf7imap.html">Horde_Imap_Client_Utf7imap</a></li>
				<li class="active"><a href="class-Horde_Imap_Client_Utils.html">Horde_Imap_Client_Utils</a></li>
				<li><a href="class-Horde_Imap_Client_Utils_Pop3.html">Horde_Imap_Client_Utils_Pop3</a></li>
			</ul>





		</div>
	</div>
</div>

<div id="splitter"></div>

<div id="right">
<div id="rightInner">
	<form id="search">
		<input type="hidden" name="cx" value="">
		<input type="hidden" name="ie" value="UTF-8">
		<input type="text" name="q" class="text" placeholder="Search">
	</form>

	<div id="navigation">
		<ul>
			<li>
				<a href="index.html" title="Overview"><span>Overview</span></a>
			</li>
			<li>
				<a href="package-Imap.Client.html" title="Summary of Imap\Client"><span>Package</span></a>
			</li>
			<li class="active">
<span>Class</span>			</li>
		</ul>
		<ul>
			<li>
				<a href="tree.html" title="Tree view of classes, interfaces, traits and exceptions"><span>Tree</span></a>
			</li>
		</ul>
		<ul>
		</ul>
	</div>

<div id="content" class="class">
	<h1>Class Horde_Imap_Client_Utils</h1>


	<div class="description">
	<p>Utility functions for the Horde IMAP client.</p>

<p>Copyright 2008-2012 Horde LLC (http://www.horde.org/)</p>

<p>getBaseSubject() code adapted from imap-base-subject.c (Dovecot 1.2) Original code released under the LGPL-2.0.1 Copyright (c) 2002-2008 Timo Sirainen <a href="&#x6d;&#97;&#x69;&#108;&#x74;&#x6f;&#58;&#x74;&#115;&#x73;&#x40;&#105;&#x6b;&#105;&#x2e;&#x66;&#105;">&#x74;&#115;&#x73;&#x40;&#105;&#x6b;&#105;&#x2e;&#x66;&#105;</a></p>

<p>See the enclosed file COPYING for license information (LGPL). If you
did not receive this file, see http://www.horde.org/licenses/lgpl21.</p>

	</div>



	<div>
		<h4>Direct known subclasses</h4>
			<a href="class-Horde_Imap_Client_Utils_Pop3.html">Horde_Imap_Client_Utils_Pop3</a>
	</div>






	<div class="info">
		
		
		
		<b>Package:</b> Imap\Client<br>

				<b>Category:</b>
				Horde
<br>
				<b>License:</b>
				<a href="http://www.horde.org/licenses/lgpl21">LGPL 2.1</a><br>
				<b>Author:</b>
				Michael Slusarz <a href="&#109;&#x61;&#105;&#x6c;&#116;&#x6f;&#58;&#x73;&#108;&#x75;&#115;&#x61;&#114;&#x7a;&#64;&#x68;&#111;&#x72;&#100;&#x65;.&#x6f;r&#103;">&#x73;&#108;&#x75;&#115;&#x61;&#114;&#x7a;&#64;&#x68;&#111;&#x72;&#100;&#x65;.&#x6f;r&#103;</a>
<br>
		<b>Located at</b> <a href="source-class-Horde_Imap_Client_Utils.html#2-675" title="Go to source code">Horde/Imap/Client/Utils.php</a><br>
	</div>



	<table class="summary methods" id="methods">
	<caption>Methods summary</caption>
	<tr data-order="toSequenceString" id="_toSequenceString">

		<td class="attributes"><code>
			 public 

			string
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_toSequenceString">#</a>
		<code><a href="source-class-Horde_Imap_Client_Utils.html#21-96" title="Go to source code">toSequenceString</a>( <span>mixed <var>$in</var></span>, <span>array <var>$options</var> = <span class="php-keyword1">array</span>()</span> )</code>

		<div class="description short">
			<p>Create an IMAP message sequence string from a list of indices.</p>

		</div>

		<div class="description detailed hidden">
			<p>Create an IMAP message sequence string from a list of indices.</p>

<p>Index Format: range_start:range_end,uid,uid2,...</p>

<p>Mailbox Format: {mbox_length}[mailbox]range_start:range_end,uid,uid2,...</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$in</var></dt>
					<dd>&lt;p&gt;An array of indices (or a single index). See
                       'mailbox' below.&lt;/p&gt;
</dd>
					<dt><var>$options</var></dt>
					<dd>&lt;p&gt;Additional options:
  - mailbox: (boolean) If true, store mailbox information with the
             ID list.  $in should be an array of arrays, with keys as
             mailbox names and values as IDs.
             DEFAULT: false
  - nosort: (boolean) Do not numerically sort the IDs before creating
            the range?
            DEFAULT: false&lt;/p&gt;
</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>string</code><br>The IMAP message sequence string.

				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="fromSequenceString" id="_fromSequenceString">

		<td class="attributes"><code>
			 public 

			array
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_fromSequenceString">#</a>
		<code><a href="source-class-Horde_Imap_Client_Utils.html#98-154" title="Go to source code">fromSequenceString</a>( <span>string <var>$str</var></span> )</code>

		<div class="description short">
			<p>Parse an IMAP message sequence string into a list of indices.
See toSequenceString() for allowed formats.</p>

		</div>

		<div class="description detailed hidden">
			<p>Parse an IMAP message sequence string into a list of indices.
See toSequenceString() for allowed formats.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$str</var></dt>
					<dd>The IMAP message sequence string.
</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>array</code><br><p>An array of indices.  If string contains mailbox info,
               return value will be an array of arrays, with keys as
               mailbox names and values as IDs. Otherwise, return the
               list of IDs.</p>

				</div>


				<h4>See</h4>
				<div class="list">
						<code><code><a href="class-Horde_Imap_Client_Utils.html#_toSequenceString">Horde_Imap_Client_Utils::toSequenceString()</a></code></code><br>
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="removeBareNewlines" id="_removeBareNewlines">

		<td class="attributes"><code>
			 public 

			string
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_removeBareNewlines">#</a>
		<code><a href="source-class-Horde_Imap_Client_Utils.html#156-166" title="Go to source code">removeBareNewlines</a>( <span>string <var>$str</var></span> )</code>

		<div class="description short">
			<p>Remove "bare newlines" from a string.</p>

		</div>

		<div class="description detailed hidden">
			<p>Remove "bare newlines" from a string.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$str</var></dt>
					<dd>The original string.
</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>string</code><br>The string with all bare newlines removed.

				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="escape" id="_escape">

		<td class="attributes"><code>
			 public 

			string
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_escape">#</a>
		<code><a href="source-class-Horde_Imap_Client_Utils.html#168-188" title="Go to source code">escape</a>( <span>string <var>$str</var></span>, <span>boolean <var>$force</var> = <span class="php-keyword1">false</span></span> )</code>

		<div class="description short">
			<p>Escape IMAP output via a quoted string (see RFC 3501 [4.3]). Note that
IMAP quoted strings support 7-bit characters only and can not contain
either CR or LF.</p>

		</div>

		<div class="description detailed hidden">
			<p>Escape IMAP output via a quoted string (see RFC 3501 [4.3]). Note that
IMAP quoted strings support 7-bit characters only and can not contain
either CR or LF.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$str</var></dt>
					<dd>The unescaped string.
</dd>
					<dt><var>$force</var></dt>
					<dd>Always add quotes?
</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>string</code><br>The escaped string.

				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="stripNonAtomChars" id="_stripNonAtomChars">

		<td class="attributes"><code>
			 public 

			string
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_stripNonAtomChars">#</a>
		<code><a href="source-class-Horde_Imap_Client_Utils.html#190-202" title="Go to source code">stripNonAtomChars</a>( <span>string <var>$str</var></span> )</code>

		<div class="description short">
			<p>Given a string, will strip out any characters that are not allowed in
the IMAP 'atom' definition (RFC 3501 [9]).</p>

		</div>

		<div class="description detailed hidden">
			<p>Given a string, will strip out any characters that are not allowed in
the IMAP 'atom' definition (RFC 3501 [9]).</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$str</var></dt>
					<dd>An ASCII string.
</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>string</code><br><p>The string with the disallowed atom characters stripped
                out.</p>

				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="getBaseSubject" id="_getBaseSubject">

		<td class="attributes"><code>
			 public 

			string
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_getBaseSubject">#</a>
		<code><a href="source-class-Horde_Imap_Client_Utils.html#204-251" title="Go to source code">getBaseSubject</a>( <span>string <var>$str</var></span>, <span>array <var>$options</var> = <span class="php-keyword1">array</span>()</span> )</code>

		<div class="description short">
			<p>Return the "base subject" defined in RFC 5256 [2.1].</p>

		</div>

		<div class="description detailed hidden">
			<p>Return the "base subject" defined in RFC 5256 [2.1].</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$str</var></dt>
					<dd>The original subject string.
</dd>
					<dt><var>$options</var></dt>
					<dd>&lt;p&gt;Additional options:
  - keepblob: (boolean) Don't remove any "blob" information (i.e. text
              leading text between square brackets) from string.&lt;/p&gt;
</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>string</code><br>The cleaned up subject string.

				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="parseUrl" id="_parseUrl">

		<td class="attributes"><code>
			 public 

			mixed
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_parseUrl">#</a>
		<code><a href="source-class-Horde_Imap_Client_Utils.html#253-347" title="Go to source code">parseUrl</a>( <span>string <var>$url</var></span> )</code>

		<div class="description short">
			<p>Parse a POP3 (RFC 2384) or IMAP (RFC 5092/5593) URL.</p>

		</div>

		<div class="description detailed hidden">
			<p>Parse a POP3 (RFC 2384) or IMAP (RFC 5092/5593) URL.</p>

<p>Absolute IMAP URLs takes one of the following forms: - imap://<iserver>[/] - imap://<iserver>/<enc-mailbox>[<uidvalidity>][?<enc-search>] - imap://<iserver>/<enc-mailbox>[<uidvalidity>]<iuid>[<isection>][<ipartial>][<iurlauth>]</p>

<p>POP URLs take one of the following forms: - pop://<user>;auth=<auth>@<host>:<port></p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$url</var></dt>
					<dd>A URL string.
</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>mixed</code><br><p>False if the URL is invalid.  If valid, an array with
               the following fields:
  - auth: (string) The authentication method to use.
  - hostspec: (string) The remote server. (Not present for relative
              URLs).
  - mailbox: (string) The IMAP mailbox.
  - partial: (string) A byte range for use with IMAP FETCH.
  - port: (integer) The remote port. (Not present for relative URLs).
  - relative: (boolean) True if this is a relative URL.
  - search: (string) A search query to be run with IMAP SEARCH.
  - section: (string) A MIME part ID.
  - type: (string) Either 'imap' or 'pop'. (Not present for relative
          URLs).
  - username: (string) The username to use on the remote server.
  - uid: (string) The IMAP UID.
  - uidvalidity: (integer) The IMAP UIDVALIDITY for the given mailbox.
  - urlauth: (string) URLAUTH info (not parsed).</p>

				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="createUrl" id="_createUrl">

		<td class="attributes"><code>
			 public 

			string
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_createUrl">#</a>
		<code><a href="source-class-Horde_Imap_Client_Utils.html#349-413" title="Go to source code">createUrl</a>( <span>array <var>$data</var></span> )</code>

		<div class="description short">
			<p>Create a POP3 (RFC 2384) or IMAP (RFC 5092/5593) URL.</p>

		</div>

		<div class="description detailed hidden">
			<p>Create a POP3 (RFC 2384) or IMAP (RFC 5092/5593) URL.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$data</var></dt>
					<dd>&lt;p&gt;The data used to create the URL. See the return
                    value from parseUrl() for the available fields.&lt;/p&gt;
</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>string</code><br>A URL string.

				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="parseCommandArray" id="_parseCommandArray">

		<td class="attributes"><code>
			 public 

			string
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_parseCommandArray">#</a>
		<code><a href="source-class-Horde_Imap_Client_Utils.html#415-534" title="Go to source code">parseCommandArray</a>( <span>string <var>$query</var></span>, <span>callable <var>$callback</var> = <span class="php-keyword1">null</span></span>, <span>array <var>$out</var> = <span class="php-quote">''</span></span> )</code>

		<div class="description short">
			<p>Parses a client command array to create a server command string.</p>

		</div>

		<div class="description detailed hidden">
			<p>Parses a client command array to create a server command string.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$query</var></dt>
					<dd>$out         The unprocessed command string.
</dd>
					<dt><var>$callback</var></dt>
					<dd>&lt;p&gt;A callback function to use if literal data
                           is found. Two arguments are passed: the
                           command string (as built so far) and the
                           literal data. The return value should be the
                           new value for the current command string.&lt;/p&gt;
</dd>
					<dt><var>$out</var></dt>
					<dd>$query        An array with the following format:

&lt;ul&gt;
 &lt;li&gt;
  Array
  &lt;ul&gt;
   &lt;li&gt;
    Array with keys 't' and 'v'
    &lt;ul&gt;
     &lt;li&gt;t: IMAP data type (Horde_Imap_Client::DATA_* constants)&lt;/li&gt;
     &lt;li&gt;v: Data value&lt;/li&gt;
    &lt;/ul&gt;
   &lt;/li&gt;
   &lt;li&gt;
    Array with only values
    &lt;ul&gt;
     &lt;li&gt;Treated as a parenthesized list&lt;/li&gt;
    &lt;/ul&gt;
   &lt;/li&gt;
  &lt;/ul&gt;
 &lt;/li&gt;
 &lt;li&gt;
  Null
  &lt;ul&gt;
   &lt;li&gt;Ignored&lt;/li&gt;
  &lt;/ul&gt;
&lt;/li&gt;
 &lt;li&gt;
  Resource
  &lt;ul&gt;
   &lt;li&gt;Treated as literal data&lt;/li&gt;
  &lt;/ul&gt;
&lt;/li&gt;
 &lt;li&gt;
  String
  &lt;ul&gt;
   &lt;li&gt;Output as-is (raw)&lt;/li&gt;
  &lt;/ul&gt;
 &lt;/li&gt;
&lt;/ul&gt;
</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>string</code><br>The command string.

				</div>


				<h4>Since</h4>
				<div class="list">
						1.2.0
<br>
				</div>


		</div>
		</div></td>
	</tr>
	</table>


















</div>

	<div id="footer">
		 API documentation generated by <a href="http://apigen.org">ApiGen</a>
	</div>
</div>
</div>
<script src="resources/combined.js?721046668"></script>
<script src="elementlist.js?3530535080"></script>
</body>
</html>

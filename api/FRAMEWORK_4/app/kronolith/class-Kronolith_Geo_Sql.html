<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<title>Class Kronolith_Geo_Sql</title>

	<link rel="stylesheet" href="resources/style.css?1648332946">

</head>

<body>
<div id="left">
	<div id="menu">
		<a href="index.html" title="Overview"><span>Overview</span></a>


		<div id="groups">
			<h3>Packages</h3>
			<ul>
				<li class="active"><a href="namespace-Kronolith.html">Kronolith</a>
						</li>
				<li><a href="namespace-None.html">None</a>
						</li>
			</ul>
		</div>

		<hr>


		<div id="elements">
			<h3>Classes</h3>
			<ul>
				<li><a href="class-Kronolith.html">Kronolith</a></li>
				<li><a href="class-Kronolith_Ajax_Application.html">Kronolith_Ajax_Application</a></li>
				<li><a href="class-Kronolith_Ajax_Imple_ContactAutoCompleter.html">Kronolith_Ajax_Imple_ContactAutoCompleter</a></li>
				<li><a href="class-Kronolith_Ajax_Imple_Embed.html">Kronolith_Ajax_Imple_Embed</a></li>
				<li><a href="class-Kronolith_Ajax_Imple_TagActions.html">Kronolith_Ajax_Imple_TagActions</a></li>
				<li><a href="class-Kronolith_Ajax_Imple_TagAutoCompleter.html">Kronolith_Ajax_Imple_TagAutoCompleter</a></li>
				<li><a href="class-Kronolith_Api.html">Kronolith_Api</a></li>
				<li><a href="class-Kronolith_Calendar.html">Kronolith_Calendar</a></li>
				<li><a href="class-Kronolith_Calendar_External.html">Kronolith_Calendar_External</a></li>
				<li><a href="class-Kronolith_Calendar_External_Tasks.html">Kronolith_Calendar_External_Tasks</a></li>
				<li><a href="class-Kronolith_Calendar_Holiday.html">Kronolith_Calendar_Holiday</a></li>
				<li><a href="class-Kronolith_Calendar_Internal.html">Kronolith_Calendar_Internal</a></li>
				<li><a href="class-Kronolith_Calendar_Remote.html">Kronolith_Calendar_Remote</a></li>
				<li><a href="class-Kronolith_Calendar_Resource.html">Kronolith_Calendar_Resource</a></li>
				<li><a href="class-Kronolith_Calendars_Base.html">Kronolith_Calendars_Base</a></li>
				<li><a href="class-Kronolith_Calendars_Default.html">Kronolith_Calendars_Default</a></li>
				<li><a href="class-Kronolith_Calendars_Kolab.html">Kronolith_Calendars_Kolab</a></li>
				<li><a href="class-Kronolith_Day.html">Kronolith_Day</a></li>
				<li><a href="class-Kronolith_Driver.html">Kronolith_Driver</a></li>
				<li><a href="class-Kronolith_Driver_Holidays.html">Kronolith_Driver_Holidays</a></li>
				<li><a href="class-Kronolith_Driver_Horde.html">Kronolith_Driver_Horde</a></li>
				<li><a href="class-Kronolith_Driver_Ical.html">Kronolith_Driver_Ical</a></li>
				<li><a href="class-Kronolith_Driver_Kolab.html">Kronolith_Driver_Kolab</a></li>
				<li><a href="class-Kronolith_Driver_Mock.html">Kronolith_Driver_Mock</a></li>
				<li><a href="class-Kronolith_Driver_Resource.html">Kronolith_Driver_Resource</a></li>
				<li><a href="class-Kronolith_Driver_Sql.html">Kronolith_Driver_Sql</a></li>
				<li><a href="class-Kronolith_Event.html">Kronolith_Event</a></li>
				<li><a href="class-Kronolith_Event_Holidays.html">Kronolith_Event_Holidays</a></li>
				<li><a href="class-Kronolith_Event_Horde.html">Kronolith_Event_Horde</a></li>
				<li><a href="class-Kronolith_Event_Ical.html">Kronolith_Event_Ical</a></li>
				<li><a href="class-Kronolith_Event_Kolab.html">Kronolith_Event_Kolab</a></li>
				<li><a href="class-Kronolith_Event_Resource.html">Kronolith_Event_Resource</a></li>
				<li><a href="class-Kronolith_Event_Sql.html">Kronolith_Event_Sql</a></li>
				<li><a href="class-Kronolith_Exception.html">Kronolith_Exception</a></li>
				<li><a href="class-Kronolith_Factory_Calendars.html">Kronolith_Factory_Calendars</a></li>
				<li><a href="class-Kronolith_Factory_Geo.html">Kronolith_Factory_Geo</a></li>
				<li><a href="class-Kronolith_Form_CreateCalendar.html">Kronolith_Form_CreateCalendar</a></li>
				<li><a href="class-Kronolith_Form_CreateResource.html">Kronolith_Form_CreateResource</a></li>
				<li><a href="class-Kronolith_Form_CreateResourceGroup.html">Kronolith_Form_CreateResourceGroup</a></li>
				<li><a href="class-Kronolith_Form_DeleteCalendar.html">Kronolith_Form_DeleteCalendar</a></li>
				<li><a href="class-Kronolith_Form_DeleteResource.html">Kronolith_Form_DeleteResource</a></li>
				<li><a href="class-Kronolith_Form_DeleteResourceGroup.html">Kronolith_Form_DeleteResourceGroup</a></li>
				<li><a href="class-Kronolith_Form_EditCalendar.html">Kronolith_Form_EditCalendar</a></li>
				<li><a href="class-Kronolith_Form_EditRemoteCalendar.html">Kronolith_Form_EditRemoteCalendar</a></li>
				<li><a href="class-Kronolith_Form_EditResource.html">Kronolith_Form_EditResource</a></li>
				<li><a href="class-Kronolith_Form_EditResourceGroup.html">Kronolith_Form_EditResourceGroup</a></li>
				<li><a href="class-Kronolith_Form_SubscribeRemoteCalendar.html">Kronolith_Form_SubscribeRemoteCalendar</a></li>
				<li><a href="class-Kronolith_Form_UnsubscribeRemoteCalendar.html">Kronolith_Form_UnsubscribeRemoteCalendar</a></li>
				<li><a href="class-Kronolith_FreeBusy.html">Kronolith_FreeBusy</a></li>
				<li><a href="class-Kronolith_FreeBusy_View.html">Kronolith_FreeBusy_View</a></li>
				<li><a href="class-Kronolith_FreeBusy_View_Day.html">Kronolith_FreeBusy_View_Day</a></li>
				<li><a href="class-Kronolith_FreeBusy_View_Month.html">Kronolith_FreeBusy_View_Month</a></li>
				<li><a href="class-Kronolith_FreeBusy_View_Week.html">Kronolith_FreeBusy_View_Week</a></li>
				<li><a href="class-Kronolith_FreeBusy_View_Workweek.html">Kronolith_FreeBusy_View_Workweek</a></li>
				<li><a href="class-Kronolith_Geo_Base.html">Kronolith_Geo_Base</a></li>
				<li><a href="class-Kronolith_Geo_Mysql.html">Kronolith_Geo_Mysql</a></li>
				<li class="active"><a href="class-Kronolith_Geo_Sql.html">Kronolith_Geo_Sql</a></li>
				<li><a href="class-Kronolith_LoginTasks_SystemTask_Upgrade.html">Kronolith_LoginTasks_SystemTask_Upgrade</a></li>
				<li><a href="class-Kronolith_LoginTasks_Task_PurgeEvents.html">Kronolith_LoginTasks_Task_PurgeEvents</a></li>
				<li><a href="class-Kronolith_Notification_Listener_AjaxStatus.html">Kronolith_Notification_Listener_AjaxStatus</a></li>
				<li><a href="class-Kronolith_Resource.html">Kronolith_Resource</a></li>
				<li><a href="class-Kronolith_Resource_Base.html">Kronolith_Resource_Base</a></li>
				<li><a href="class-Kronolith_Resource_Group.html">Kronolith_Resource_Group</a></li>
				<li><a href="class-Kronolith_Resource_Single.html">Kronolith_Resource_Single</a></li>
				<li><a href="class-Kronolith_Storage.html">Kronolith_Storage</a></li>
				<li><a href="class-Kronolith_Storage_Kolab.html">Kronolith_Storage_Kolab</a></li>
				<li><a href="class-Kronolith_Storage_Sql.html">Kronolith_Storage_Sql</a></li>
				<li><a href="class-Kronolith_Tagger.html">Kronolith_Tagger</a></li>
				<li><a href="class-Kronolith_Test.html">Kronolith_Test</a></li>
				<li><a href="class-Kronolith_View_Day.html">Kronolith_View_Day</a></li>
				<li><a href="class-Kronolith_View_DeleteEvent.html">Kronolith_View_DeleteEvent</a></li>
				<li><a href="class-Kronolith_View_EditEvent.html">Kronolith_View_EditEvent</a></li>
				<li><a href="class-Kronolith_View_Event.html">Kronolith_View_Event</a></li>
				<li><a href="class-Kronolith_View_ExportEvent.html">Kronolith_View_ExportEvent</a></li>
				<li><a href="class-Kronolith_View_Month.html">Kronolith_View_Month</a></li>
				<li><a href="class-Kronolith_View_Week.html">Kronolith_View_Week</a></li>
				<li><a href="class-Kronolith_View_WorkWeek.html">Kronolith_View_WorkWeek</a></li>
				<li><a href="class-Kronolith_View_Year.html">Kronolith_View_Year</a></li>
			</ul>





		</div>
	</div>
</div>

<div id="splitter"></div>

<div id="right">
<div id="rightInner">
	<form id="search">
		<input type="hidden" name="cx" value="">
		<input type="hidden" name="ie" value="UTF-8">
		<input type="text" name="q" class="text" placeholder="Search">
	</form>

	<div id="navigation">
		<ul>
			<li>
				<a href="index.html" title="Overview"><span>Overview</span></a>
			</li>
			<li>
				<a href="package-Kronolith.html" title="Summary of Kronolith"><span>Package</span></a>
			</li>
			<li class="active">
<span>Class</span>			</li>
		</ul>
		<ul>
			<li>
				<a href="tree.html" title="Tree view of classes, interfaces, traits and exceptions"><span>Tree</span></a>
			</li>
		</ul>
		<ul>
		</ul>
	</div>

<div id="content" class="class">
	<h1>Class Kronolith_Geo_Sql</h1>


	<div class="description">
	<p>General SQL implementation for storing/searching geo location data for
events.</p>

<p>Copyright 2009-2012 Horde LLC (http://www.horde.org/)</p>

<p>See the enclosed file COPYING for license information (GPL). If you
did not receive this file, see http://www.horde.org/licenses/gpl.</p>

	</div>

	<dl class="tree">
		<dd style="padding-left:0px">
			<a href="class-Kronolith_Geo_Base.html"><span>Kronolith_Geo_Base</span></a>
			
			
			
		</dd>
		<dd style="padding-left:30px">
			<img src="resources/inherit.png" alt="Extended by">
<b><span>Kronolith_Geo_Sql</span></b>			
			
			
		</dd>
	</dl>


	<div>
		<h4>Direct known subclasses</h4>
			<a href="class-Kronolith_Geo_Mysql.html">Kronolith_Geo_Mysql</a>
	</div>






	<div class="info">
		
		
		
		<b>Package:</b> Kronolith<br>

				<b>Category:</b>
				Horde
<br>
				<b>Author:</b>
				Michael J. Rubinsky <a href="&#x6d;&#97;&#x69;&#108;&#x74;&#x6f;&#58;&#x6d;&#114;&#x75;&#x62;&#105;&#x6e;&#115;&#x6b;&#x40;&#104;&#x6f;&#114;&#x64;&#x65;&#46;&#x6f;&#114;&#x67;">&#x6d;&#114;&#x75;&#x62;&#105;&#x6e;&#115;&#x6b;&#x40;&#104;&#x6f;&#114;&#x64;&#x65;&#46;&#x6f;&#114;&#x67;</a>
<br>
		<b>Located at</b> <a href="source-class-Kronolith_Geo_Sql.html#2-118" title="Go to source code">Geo/Sql.php</a><br>
	</div>



	<table class="summary methods" id="methods">
	<caption>Methods summary</caption>
	<tr data-order="setLocation" id="_setLocation">

		<td class="attributes"><code>
			 public 

			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_setLocation">#</a>
		<code><a href="source-class-Kronolith_Geo_Sql.html#22-64" title="Go to source code">setLocation</a>( <span>string <var>$event_id</var></span>, <span>array <var>$point</var></span> )</code>

		<div class="description short">
			<p>Set the location of the specified event _id</p>

		</div>

		<div class="description detailed hidden">
			<p>Set the location of the specified event _id</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$event_id</var></dt>
					<dd>The event id
</dd>
					<dt><var>$point</var></dt>
					<dd>Hash containing 'lat' and 'lon' coordinates
</dd>
				</dl></div>


				<h4>Throws</h4>
				<div class="list">
					<code><a href="class-Kronolith_Exception.html">Kronolith_Exception</a></code>
				</div>

				<h4>See</h4>
				<div class="list">
						Kronolith_Geo_Base#setLocation()
<br>
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="getLocation" id="_getLocation">

		<td class="attributes"><code>
			 public 

			array
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_getLocation">#</a>
		<code><a href="source-class-Kronolith_Geo_Sql.html#66-80" title="Go to source code">getLocation</a>( <span>string <var>$event_id</var></span> )</code>

		<div class="description short">
			<p>Get the location of the provided event_id.</p>

		</div>

		<div class="description detailed hidden">
			<p>Get the location of the provided event_id.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$event_id</var></dt>
					<dd>The event id
</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>array</code><br>A hash containing 'lat' and 'lon'

				</div>

				<h4>Throws</h4>
				<div class="list">
					<code><a href="class-Kronolith_Exception.html">Kronolith_Exception</a></code>
				</div>

				<h4>See</h4>
				<div class="list">
						Kronolith_Geo_Base#getLocation()
<br>
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="deleteLocation" id="_deleteLocation">

		<td class="attributes"><code>
			 public 

			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_deleteLocation">#</a>
		<code><a href="source-class-Kronolith_Geo_Sql.html#82-99" title="Go to source code">deleteLocation</a>( <span>string <var>$event_id</var></span> )</code>

		<div class="description short">
			<p>Deletes an entry from storage</p>

		</div>

		<div class="description detailed hidden">
			<p>Deletes an entry from storage</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$event_id</var></dt>
					<dd>
</dd>
				</dl></div>


				<h4>Throws</h4>
				<div class="list">
					<code><a href="class-Kronolith_Exception.html">Kronolith_Exception</a></code>
				</div>

				<h4>See</h4>
				<div class="list">
						Kronolith_Geo_Base#removeLocation()
<br>
				</div>


		</div>
		</div></td>
	</tr>
	<tr data-order="search" id="_search">

		<td class="attributes"><code>
			 public 

			array
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_search">#</a>
		<code><a href="source-class-Kronolith_Geo_Sql.html#101-117" title="Go to source code">search</a>( <span>array <var>$criteria</var></span> )</code>

		<div class="description short">
			<p>Search for events "close to" a given point.</p>

		</div>

		<div class="description detailed hidden">
			<p>Search for events "close to" a given point.</p>

<p>TODO: If all we really use the geodata for is distance, it really doesn't make sense to use the GIS extensions since the distance calculations are done with Euclidian geometry ONLY ... and therefore will give incorrect results when done on a geocentric coordinate system. They might be useful if we eventually want to do searches on MBRs</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$criteria</var></dt>
					<dd>An array of:

&lt;pre&gt;point  - lat/lon &lt;span class="php-keyword2"&gt;hash&lt;/span&gt;
radius - the radius to search in
limit  - limit the number of hits
factor - Conversion factor &lt;span class="php-keyword1"&gt;for&lt;/span&gt; miles per distance unit [&lt;span class="php-keyword1"&gt;default&lt;/span&gt; is &lt;span class="php-num"&gt;69&lt;/span&gt;].&lt;/pre&gt;
</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>array</code><br>of event ids with locations near the specified criteria.

				</div>

				<h4>Throws</h4>
				<div class="list">
					<code><a href="class-Kronolith_Exception.html">Kronolith_Exception</a></code>
				</div>

				<h4>See</h4>
				<div class="list">
						kronolith/lib/Driver/Kronolith_Driver_Geo#search($criteria)
<br>
				</div>


		</div>
		</div></td>
	</tr>
	</table>

	<table class="summary inherited">
	<caption>Methods inherited from <a href="class-Kronolith_Geo_Base.html#methods">Kronolith_Geo_Base</a></caption>
	<tr>
		<td><code>
			<a href="class-Kronolith_Geo_Base.html#___construct">__construct()</a>
		</code></td>
	</tr>
	</table>

















</div>

	<div id="footer">
		 API documentation generated by <a href="http://apigen.org">ApiGen</a>
	</div>
</div>
</div>
<script src="resources/combined.js?721046668"></script>
<script src="elementlist.js?328801949"></script>
</body>
</html>

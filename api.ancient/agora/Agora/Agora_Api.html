<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
		<head>
			<!-- template designed by Marco Von Ballmoos  -->
			<title>Docs For Class Agora_Api</title>
			<link rel="stylesheet" href="../media/stylesheet.css" />
						<script src="../media/lib/classTree.js"></script>
												<script language="javascript" type="text/javascript">
				var imgPlus = new Image();
				var imgMinus = new Image();
				imgPlus.src = "../media/images/plus.png";
				imgMinus.src = "../media/images/minus.png";
				
				function showNode(Node){
							switch(navigator.family){
								case 'nn4':
									// Nav 4.x code fork...
							var oTable = document.layers["span" + Node];
							var oImg = document.layers["img" + Node];
									break;
								case 'ie4':
									// IE 4/5 code fork...
							var oTable = document.all["span" + Node];
							var oImg = document.all["img" + Node];
									break;
								case 'gecko':
									// Standards Compliant code fork...
							var oTable = document.getElementById("span" + Node);
							var oImg = document.getElementById("img" + Node);
									break;
							}
					oImg.src = imgMinus.src;
					oTable.style.display = "block";
				}
				
				function hideNode(Node){
							switch(navigator.family){
								case 'nn4':
									// Nav 4.x code fork...
							var oTable = document.layers["span" + Node];
							var oImg = document.layers["img" + Node];
									break;
								case 'ie4':
									// IE 4/5 code fork...
							var oTable = document.all["span" + Node];
							var oImg = document.all["img" + Node];
									break;
								case 'gecko':
									// Standards Compliant code fork...
							var oTable = document.getElementById("span" + Node);
							var oImg = document.getElementById("img" + Node);
									break;
							}
					oImg.src = imgPlus.src;
					oTable.style.display = "none";
				}
				
				function nodeIsVisible(Node){
							switch(navigator.family){
								case 'nn4':
									// Nav 4.x code fork...
							var oTable = document.layers["span" + Node];
									break;
								case 'ie4':
									// IE 4/5 code fork...
							var oTable = document.all["span" + Node];
									break;
								case 'gecko':
									// Standards Compliant code fork...
							var oTable = document.getElementById("span" + Node);
									break;
							}
					return (oTable && oTable.style.display == "block");
				}
				
				function toggleNodeVisibility(Node){
					if (nodeIsVisible(Node)){
						hideNode(Node);
					}else{
						showNode(Node);
					}
				}
			</script>
					</head>
		<body>
			<div class="page-body">			
<h2 class="class-name"><img src="../media/images/Class_logo.png"
														alt=" Class"
														title=" Class"
														style="vertical-align: middle"> Agora_Api</h2>

<a name="sec-description"></a>
<div class="info-box">
	<div class="info-box-title">Description</div>
	<div class="nav-bar">
					<span class="disabled">Description</span> |
															<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
						
					</div>
	<div class="info-box-body">
        		<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Agora external API interface.</p>
<p class="description"><p>This file defines Agora's external API interface. Other  applications can interact with Agora through this API.</p><p>$Horde: agora/lib/Api.php,v 1.3 2009-10-30 17:47:23 duck Exp $</p><p>Copyright 2003-2009 The Horde Project (http://www.horde.org/)</p><p>See the enclosed file COPYING for license information (GPL). If you  did not receive this file, see http://www.fsf.org/copyleft/gpl.html.</p></p>
	<ul class="tags">
				<li><span class="field">author:</span> Marko Djukic &lt;<a href="mailto:marko@oblo.com">marko@oblo.com</a>&gt;</li>
				<li><span class="field">author:</span> Duck &lt;<a href="mailto:duck@obala.net">duck@obala.net</a>&gt;</li>
			</ul>
		<p class="notes">
			Located in <a class="field" href="_lib---Api.php.html">/lib/Api.php</a> (line <span class="field">20</span>)
		</p>
		
				
		<pre>Horde_Registry_Api
   |
   --Agora_Api</pre>
	
			</div>
</div>




	<a name="sec-method-summary"></a>
	<div class="info-box">
		<div class="info-box-title">Method Summary</span></div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
												<span class="disabled">Methods</span> (<a href="#sec-methods">details</a>)
		</div>
		<div class="info-box-body">			
			<div class="method-summary">
																																																																																																																																															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">mixed</span>
										<a href="#addMessage" title="details" class="method-name">addMessage</a>
											(<span class="var-type">string</span>&nbsp;<span class="var-name">$scope</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$forum_name</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$callback</span>, [<span class="var-type">array</span>&nbsp;<span class="var-name">$params</span> = <span class="var-default">array()</span>])
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">boolean</span>
										<a href="#deleteForum" title="details" class="method-name">deleteForum</a>
											(<span class="var-type">string</span>&nbsp;<span class="var-name">$scope</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$forum_name</span>)
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">mixed</span>
										<a href="#doComments" title="details" class="method-name">doComments</a>
											(<span class="var-type">string</span>&nbsp;<span class="var-name">$scope</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$key</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$callback</span>, [<span class="var-type"></span>&nbsp;<span class="var-name">$bodies</span> = <span class="var-default">true</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$base_url</span> = <span class="var-default">null</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$url</span> = <span class="var-default">null</span>], [<span class="var-type">array</span>&nbsp;<span class="var-name">$variables</span> = <span class="var-default">null</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$template_file</span> = <span class="var-default">false</span>], <span class="var-type">boolean</span>&nbsp;<span class="var-name">$body</span>)
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">mixed</span>
										<a href="#getForumName" title="details" class="method-name">getForumName</a>
											(<span class="var-type">string</span>&nbsp;<span class="var-name">$scope</span>, <span class="var-type">integer</span>&nbsp;<span class="var-name">$forum_id</span>)
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">array</span>
										<a href="#getThreads" title="details" class="method-name">getThreads</a>
											(<span class="var-type">string</span>&nbsp;<span class="var-name">$forum_name</span>, [<span class="var-type">string</span>&nbsp;<span class="var-name">$sort_by</span> = <span class="var-default">'message_timestamp'</span>], [<span class="var-type">integer</span>&nbsp;<span class="var-name">$sort_dir</span> = <span class="var-default">0</span>], [<span class="var-type">boolean</span>&nbsp;<span class="var-name">$bodies</span> = <span class="var-default">false</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$scope</span> = <span class="var-default">'agora'</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$base_url</span> = <span class="var-default">null</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$from</span> = <span class="var-default">0</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$count</span> = <span class="var-default">0</span>])
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">array</span>
										<a href="#getThreadsBatch" title="details" class="method-name">getThreadsBatch</a>
											(<span class="var-type">array</span>&nbsp;<span class="var-name">$forum_names</span>, [<span class="var-type">string</span>&nbsp;<span class="var-name">$sort_by</span> = <span class="var-default">'message_timestamp'</span>], [<span class="var-type">integer</span>&nbsp;<span class="var-name">$sort_dir</span> = <span class="var-default">0</span>], [<span class="var-type">boolean</span>&nbsp;<span class="var-name">$bodies</span> = <span class="var-default">false</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$scope</span> = <span class="var-default">'agora'</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$base_url</span> = <span class="var-default">null</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$from</span> = <span class="var-default">0</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$count</span> = <span class="var-default">0</span>])
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">array</span>
										<a href="#getThreadsByForumOwner" title="details" class="method-name">getThreadsByForumOwner</a>
											(<span class="var-type"></span>&nbsp;<span class="var-name">$owner</span>, [<span class="var-type">string</span>&nbsp;<span class="var-name">$sort_by</span> = <span class="var-default">'message_timestamp'</span>], [<span class="var-type">integer</span>&nbsp;<span class="var-name">$sort_dir</span> = <span class="var-default">0</span>], [<span class="var-type">boolean</span>&nbsp;<span class="var-name">$bodies</span> = <span class="var-default">false</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$scope</span> = <span class="var-default">'agora'</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$from</span> = <span class="var-default">0</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$count</span> = <span class="var-default">0</span>], <span class="var-type">string</span>&nbsp;<span class="var-name">$forum_owner</span>)
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">array</span>
										<a href="#listForums" title="details" class="method-name">listForums</a>
											([<span class="var-type">integer</span>&nbsp;<span class="var-name">$forum_id</span> = <span class="var-default">0</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$scope</span> = <span class="var-default">null</span>])
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#moderateForm" title="details" class="method-name">moderateForm</a>
											(<span class="var-type">string</span>&nbsp;<span class="var-name">$scope</span>)
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">int</span>
										<a href="#numMessages" title="details" class="method-name">numMessages</a>
											(<span class="var-type">string</span>&nbsp;<span class="var-name">$forum_name</span>, [<span class="var-type">string</span>&nbsp;<span class="var-name">$scope</span> = <span class="var-default">'agora'</span>], [<span class="var-type">int</span>&nbsp;<span class="var-name">$thread_id</span> = <span class="var-default">null</span>])
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">mixed</span>
										<a href="#numMessagesBatch" title="details" class="method-name">numMessagesBatch</a>
											(<span class="var-type">array</span>&nbsp;<span class="var-name">$forum_name</span>, [<span class="var-type">string</span>&nbsp;<span class="var-name">$scope</span> = <span class="var-default">'agora'</span>], [<span class="var-type">int</span>&nbsp;<span class="var-name">$thread_id</span> = <span class="var-default">null</span>])
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">mixed</span>
										<a href="#postMessage" title="details" class="method-name">postMessage</a>
											(<span class="var-type">string</span>&nbsp;<span class="var-name">$scope</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$forum_name</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$callback</span>, [<span class="var-type">array</span>&nbsp;<span class="var-name">$params</span> = <span class="var-default">array()</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$url</span> = <span class="var-default">null</span>], [<span class="var-type">array</span>&nbsp;<span class="var-name">$variables</span> = <span class="var-default">null</span>])
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#prepareFormData" title="details" class="method-name">prepareFormData</a>
											(<span class="var-type">string</span>&nbsp;<span class="var-name">$scope</span>, [<span class="var-type">string</span>&nbsp;<span class="var-name">$parent</span> = <span class="var-default">false</span>], [<span class="var-type">array</span>&nbsp;<span class="var-name">$info</span> = <span class="var-default">array()</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$callback</span> = <span class="var-default">null</span>])
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">mixed</span>
										<a href="#removeMessage" title="details" class="method-name">removeMessage</a>
											(<span class="var-type">string</span>&nbsp;<span class="var-name">$scope</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$forum_name</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$callback</span>, [<span class="var-type">array</span>&nbsp;<span class="var-name">$params</span> = <span class="var-default">array()</span>], [<span class="var-type">array</span>&nbsp;<span class="var-name">$variables</span> = <span class="var-default">null</span>])
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">string</span>
										<a href="#renderThreads" title="details" class="method-name">renderThreads</a>
											(<span class="var-type">string</span>&nbsp;<span class="var-name">$forum_name</span>, [<span class="var-type">boolean</span>&nbsp;<span class="var-name">$bodies</span> = <span class="var-default">false</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$scope</span> = <span class="var-default">'agora'</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$base_url</span> = <span class="var-default">null</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$template_file</span> = <span class="var-default">false</span>])
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#saveForum" title="details" class="method-name">saveForum</a>
											(<span class="var-type">string</span>&nbsp;<span class="var-name">$scope</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$parent</span>, <span class="var-type">array</span>&nbsp;<span class="var-name">$info</span>)
									</div>
											</div>
		</div>
	</div>		

	
	<a name="sec-methods"></a>
	<div class="info-box">
		<div class="info-box-title">Methods</div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
																<a href="#sec-method-summary">Methods</a> (<span class="disabled">details</span>)
						
		</div>
		<div class="info-box-body">
			<A NAME='method_detail'></A>
<a name="methodaddMessage" id="addMessage"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">addMessage</span> (line <span class="line-number">362</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Allows other Horde apps to add/edit messages.</p>
<p class="description"><p>The forum name is constructed by just the $forum_name variable  under the data root 'agora.forums.&lt;app&gt;'. It is up to the apps  themselves to make sure that the forum name is unique.</p><p>If the forum does not exist, it will be automatically created by  Agora.</p></p>
	<ul class="tags">
				<li><span class="field">return:</span> Returns message id if the message was posted                 or PEAR_Error object on error</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">mixed</span>
		<span class="method-name">
			addMessage
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$scope</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$forum_name</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$callback</span>, [<span class="var-type">array</span>&nbsp;<span class="var-name">$params</span> = <span class="var-default">array()</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$scope</span><span class="var-description">: The application which is posting this message.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$forum_name</span><span class="var-description">: The unique name for the forum.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$callback</span><span class="var-description">: A callback method of the specified application                             that gets called to make sure that posting to                             this forum is allowed.</span>			</li>
					<li>
				<span class="var-type">array</span>
				<span class="var-name">$params</span><span class="var-description">: Any parameters for the forum message posting.  <pre> message_id        - An existing message to edit
 message_parent_id - The ID of the parent message
 message_body      - Message body</pre></span>			</li>
				</ul>
		
			
	</div>
<a name="methoddeleteForum" id="deleteForum"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">deleteForum</span> (line <span class="line-number">92</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Allow other applications to delete forums. Used when an object that  has been commented on has been deleted.</p>
	<ul class="tags">
				<li><span class="field">return:</span> True on success.</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">boolean</span>
		<span class="method-name">
			deleteForum
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$scope</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$forum_name</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$scope</span><span class="var-description">: The Horde application that the forum belongs to.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$forum_name</span><span class="var-description">: The unique forum name to delete.</span>			</li>
				</ul>
		
			
	</div>
<a name="methoddoComments" id="doComments"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">doComments</span> (line <span class="line-number">674</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Allows other Horde apps to post messages.</p>
<p class="description"><p>In most apps we use the same code to make comments possible. This function  does most of that. Allow comments to be added to any app. The app itself  should check if the agora api is present, determine a key and call this  function before app::menu is called (before any output has started. At the  end of its output it can print the array returned to show the comments.</p></p>
	<ul class="tags">
				<li><span class="field">return:</span> array  Returns either the rendered Horde_Form for comments                       and threads for posting/viewing a message or PEAR                       objects on error.</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">mixed</span>
		<span class="method-name">
			doComments
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$scope</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$key</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$callback</span>, [<span class="var-type"></span>&nbsp;<span class="var-name">$bodies</span> = <span class="var-default">true</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$base_url</span> = <span class="var-default">null</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$url</span> = <span class="var-default">null</span>], [<span class="var-type">array</span>&nbsp;<span class="var-name">$variables</span> = <span class="var-default">null</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$template_file</span> = <span class="var-default">false</span>], <span class="var-type">boolean</span>&nbsp;<span class="var-name">$body</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$scope</span><span class="var-description">: The application which is posting this message.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$key</span><span class="var-description">: Unique key from the object (picture etc we're                                viewing. It will be used as the forum name.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$callback</span><span class="var-description">: A callback method of the specified application                                that gets called to make sure that posting to                                this forum is allowed.</span>			</li>
					<li>
				<span class="var-type">boolean</span>
				<span class="var-name">$body</span><span class="var-description">: Show the comment bodies in the thread view or                                not.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$base_url</span><span class="var-description">: Base URL the edit/delete/reply links should                                point to.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$url</span><span class="var-description">: If specified, the form gets submitted to this                                URL instead of the current page.</span>			</li>
					<li>
				<span class="var-type">array</span>
				<span class="var-name">$variables</span><span class="var-description">: A hash with all variables of a submitted form                                generated by this method.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$template_file</span><span class="var-description">: Template file to use.</span>			</li>
					<li>
				<span class="var-type"></span>
				<span class="var-name">$bodies</span>			</li>
				</ul>
		
			
	</div>
<a name="methodgetForumName" id="getForumName"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">getForumName</span> (line <span class="line-number">47</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Retrieve the name of a forum</p>
	<ul class="tags">
				<li><span class="field">return:</span> The forum name | Pear_Error</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">mixed</span>
		<span class="method-name">
			getForumName
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$scope</span>, <span class="var-type">integer</span>&nbsp;<span class="var-name">$forum_id</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$scope</span><span class="var-description">: Scope which form belongs to</span>			</li>
					<li>
				<span class="var-type">integer</span>
				<span class="var-name">$forum_id</span><span class="var-description">: The forum id to fetch the name for.</span>			</li>
				</ul>
		
			
	</div>
<a name="methodgetThreads" id="getThreads"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">getThreads</span> (line <span class="line-number">130</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Returns all messages of a forum, in a threaded order.</p>
	<ul class="tags">
				<li><span class="field">return:</span> All messages of the specified forum.</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">array</span>
		<span class="method-name">
			getThreads
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$forum_name</span>, [<span class="var-type">string</span>&nbsp;<span class="var-name">$sort_by</span> = <span class="var-default">'message_timestamp'</span>], [<span class="var-type">integer</span>&nbsp;<span class="var-name">$sort_dir</span> = <span class="var-default">0</span>], [<span class="var-type">boolean</span>&nbsp;<span class="var-name">$bodies</span> = <span class="var-default">false</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$scope</span> = <span class="var-default">'agora'</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$base_url</span> = <span class="var-default">null</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$from</span> = <span class="var-default">0</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$count</span> = <span class="var-default">0</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$forum_name</span><span class="var-description">: The unique name for the forum.</span>			</li>
					<li>
				<span class="var-type">boolean</span>
				<span class="var-name">$bodies</span><span class="var-description">: Whether to include message bodies in the view.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$sort_by</span><span class="var-description">: Return messages sorted by this property.</span>			</li>
					<li>
				<span class="var-type">integer</span>
				<span class="var-name">$sort_dir</span><span class="var-description">: The direction by which to sort: <ol><li>- ascending</li><li>- descending</li></ol></span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$scope</span><span class="var-description">: The application that the specified forum belongs                              to.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$base_url</span><span class="var-description">: An alternate link where edit/delete/reply links                              point to.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$from</span><span class="var-description">: The thread to begin listing at.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$count</span><span class="var-description">: The number of threads to return.</span>			</li>
				</ul>
		
			
	</div>
<a name="methodgetThreadsBatch" id="getThreadsBatch"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">getThreadsBatch</span> (line <span class="line-number">170</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Returns all messages for the forums requested, in a threaded order.</p>
	<ul class="tags">
				<li><span class="field">return:</span> An array of message arrays of the specified forum.</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">array</span>
		<span class="method-name">
			getThreadsBatch
		</span>
					(<span class="var-type">array</span>&nbsp;<span class="var-name">$forum_names</span>, [<span class="var-type">string</span>&nbsp;<span class="var-name">$sort_by</span> = <span class="var-default">'message_timestamp'</span>], [<span class="var-type">integer</span>&nbsp;<span class="var-name">$sort_dir</span> = <span class="var-default">0</span>], [<span class="var-type">boolean</span>&nbsp;<span class="var-name">$bodies</span> = <span class="var-default">false</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$scope</span> = <span class="var-default">'agora'</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$base_url</span> = <span class="var-default">null</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$from</span> = <span class="var-default">0</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$count</span> = <span class="var-default">0</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">array</span>
				<span class="var-name">$forum_names</span><span class="var-description">: An array of unique forum names.</span>			</li>
					<li>
				<span class="var-type">boolean</span>
				<span class="var-name">$bodies</span><span class="var-description">: Whether to include message bodies in the view.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$sort_by</span><span class="var-description">: Return messages sorted by this property.</span>			</li>
					<li>
				<span class="var-type">integer</span>
				<span class="var-name">$sort_dir</span><span class="var-description">: The direction by which to sort: <ol><li>- ascending</li><li>- descending</li></ol></span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$scope</span><span class="var-description">: The application that the specified forum belongs                               to.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$base_url</span><span class="var-description">: An alternate link where edit/delete/reply links                               point to.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$from</span><span class="var-description">: The thread to begin listing at.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$count</span><span class="var-description">: The number of threads to return.</span>			</li>
				</ul>
		
			
	</div>
<a name="methodgetThreadsByForumOwner" id="getThreadsByForumOwner"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">getThreadsByForumOwner</span> (line <span class="line-number">209</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Returns all messages of a forum, in a threaded order.</p>
	<ul class="tags">
				<li><span class="field">return:</span> All messages of the specified forum.</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">array</span>
		<span class="method-name">
			getThreadsByForumOwner
		</span>
					(<span class="var-type"></span>&nbsp;<span class="var-name">$owner</span>, [<span class="var-type">string</span>&nbsp;<span class="var-name">$sort_by</span> = <span class="var-default">'message_timestamp'</span>], [<span class="var-type">integer</span>&nbsp;<span class="var-name">$sort_dir</span> = <span class="var-default">0</span>], [<span class="var-type">boolean</span>&nbsp;<span class="var-name">$bodies</span> = <span class="var-default">false</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$scope</span> = <span class="var-default">'agora'</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$from</span> = <span class="var-default">0</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$count</span> = <span class="var-default">0</span>], <span class="var-type">string</span>&nbsp;<span class="var-name">$forum_owner</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$forum_owner</span><span class="var-description">: Forum owner</span>			</li>
					<li>
				<span class="var-type">boolean</span>
				<span class="var-name">$bodies</span><span class="var-description">: Whether to include message bodies in the view.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$sort_by</span><span class="var-description">: Return messages sorted by this property.</span>			</li>
					<li>
				<span class="var-type">integer</span>
				<span class="var-name">$sort_dir</span><span class="var-description">: The direction by which to sort: <ol><li>- ascending</li><li>- descending</li></ol></span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$scope</span><span class="var-description">: The application that the specified forum belongs                              to.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$from</span><span class="var-description">: The thread to begin listing at.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$count</span><span class="var-description">: The number of threads to return.</span>			</li>
					<li>
				<span class="var-type"></span>
				<span class="var-name">$owner</span>			</li>
				</ul>
		
			
	</div>
<a name="methodlistForums" id="listForums"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">listForums</span> (line <span class="line-number">31</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Get back a list of available forums.</p>
	<ul class="tags">
				<li><span class="field">return:</span> The list of available forums.</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">array</span>
		<span class="method-name">
			listForums
		</span>
					([<span class="var-type">integer</span>&nbsp;<span class="var-name">$forum_id</span> = <span class="var-default">0</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$scope</span> = <span class="var-default">null</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">integer</span>
				<span class="var-name">$forum_id</span><span class="var-description">: Supplying this parameter will return a list of                            child forums of the requested forum id.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$scope</span><span class="var-description">: If set, limit the forums to requested application.</span>			</li>
				</ul>
		
			
	</div>
<a name="methodmoderateForm" id="moderateForm"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">moderateForm</span> (line <span class="line-number">811</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Prepare the moderate form</p>
	<ul class="tags">
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			moderateForm
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$scope</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$scope</span><span class="var-description">: The Horde application that is saving this forum.</span>			</li>
				</ul>
		
			
	</div>
<a name="methodnumMessages" id="numMessages"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">numMessages</span> (line <span class="line-number">230</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Returns the number of messages in a forum.</p>
	<ul class="tags">
				<li><span class="field">return:</span> The number of messages in the specified forum.</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">int</span>
		<span class="method-name">
			numMessages
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$forum_name</span>, [<span class="var-type">string</span>&nbsp;<span class="var-name">$scope</span> = <span class="var-default">'agora'</span>], [<span class="var-type">int</span>&nbsp;<span class="var-name">$thread_id</span> = <span class="var-default">null</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$forum_name</span><span class="var-description">: The unique name for the forum.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$scope</span><span class="var-description">: The application that the specified forum                              belongs to.</span>			</li>
					<li>
				<span class="var-type">int</span>
				<span class="var-name">$thread_id</span><span class="var-description">: The thread to count, if not supplied it                              will count all messages</span>			</li>
				</ul>
		
			
	</div>
<a name="methodnumMessagesBatch" id="numMessagesBatch"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">numMessagesBatch</span> (line <span class="line-number">262</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Returns the number of messages for the requested forums.</p>
<p class="description"><p>All requested forums must belong to the same scope.</p></p>
	<ul class="tags">
				<li><span class="field">return:</span> An array containing the message counts with the forum name as                 the key | PEAR_Error</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">mixed</span>
		<span class="method-name">
			numMessagesBatch
		</span>
					(<span class="var-type">array</span>&nbsp;<span class="var-name">$forum_name</span>, [<span class="var-type">string</span>&nbsp;<span class="var-name">$scope</span> = <span class="var-default">'agora'</span>], [<span class="var-type">int</span>&nbsp;<span class="var-name">$thread_id</span> = <span class="var-default">null</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">array</span>
				<span class="var-name">$forum_name</span><span class="var-description">: An array of unique forum names.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$scope</span><span class="var-description">: The application that the specified forum                              belongs to.</span>			</li>
					<li>
				<span class="var-type">int</span>
				<span class="var-name">$thread_id</span><span class="var-description">: The thread to count, if not supplied it                              will count all messages</span>			</li>
				</ul>
		
			
	</div>
<a name="methodpostMessage" id="postMessage"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">postMessage</span> (line <span class="line-number">429</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Allows other Horde apps to post messages.</p>
<p class="description"><p>The forum name is constructed by just the $forum_name variable under the  data root 'agora.forums.&lt;app&gt;'. It is up to the apps themselves to make  sure that the forum name is unique.</p><p>If the forum does not exist, it will be automatically created by Agora.</p></p>
	<ul class="tags">
				<li><span class="field">return:</span> Returns either the rendered Horde_Form for posting a message                 or PEAR_Error object on error, or true in case of a                 successful post.</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">mixed</span>
		<span class="method-name">
			postMessage
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$scope</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$forum_name</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$callback</span>, [<span class="var-type">array</span>&nbsp;<span class="var-name">$params</span> = <span class="var-default">array()</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$url</span> = <span class="var-default">null</span>], [<span class="var-type">array</span>&nbsp;<span class="var-name">$variables</span> = <span class="var-default">null</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$scope</span><span class="var-description">: The application which is posting this message.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$forum_name</span><span class="var-description">: The unique name for the forum.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$callback</span><span class="var-description">: A callback method of the specified application                             that gets called to make sure that posting to                             this forum is allowed.</span>			</li>
					<li>
				<span class="var-type">array</span>
				<span class="var-name">$params</span><span class="var-description">: Any parameters for the forum message posting.  <pre> message_id        - An existing message to edit
 message_parent_id - The ID of the parent message
 title             - Posting title</pre></span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$url</span><span class="var-description">: If specified, the form gets submitted to this URL                             instead of the current page.</span>			</li>
					<li>
				<span class="var-type">array</span>
				<span class="var-name">$variables</span><span class="var-description">: A hash with all variables of a submitted form                             generated by this method.</span>			</li>
				</ul>
		
			
	</div>
<a name="methodprepareFormData" id="prepareFormData"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">prepareFormData</span> (line <span class="line-number">741</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Fill up a form data array.</p>
	<ul class="tags">
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			prepareFormData
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$scope</span>, [<span class="var-type">string</span>&nbsp;<span class="var-name">$parent</span> = <span class="var-default">false</span>], [<span class="var-type">array</span>&nbsp;<span class="var-name">$info</span> = <span class="var-default">array()</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$callback</span> = <span class="var-default">null</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$scope</span><span class="var-description">: The Horde application that is saving this forum.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$parent</span><span class="var-description">: The parent forum.</span>			</li>
					<li>
				<span class="var-type">array</span>
				<span class="var-name">$info</span><span class="var-description">: The forum information to consisting of:                               forum_parent_id                               forum_name                               forum_description                               forum_moderated                               forum_attachments</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$callback</span><span class="var-description">: A callback method of the specified application                           that gets called to make sure that posting to                           this forum is allowed.</span>			</li>
				</ul>
		
			
	</div>
<a name="methodremoveMessage" id="removeMessage"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">removeMessage</span> (line <span class="line-number">576</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Allows other Horde apps to remove messages.</p>
<p class="description"><p>The forum name is constructed by just the $forum_name variable  under the data root 'agora.forums.&lt;app&gt;'. It is up to the apps  themselves to make sure that the forum name is unique.</p></p>
	<ul class="tags">
				<li><span class="field">return:</span> Returns either the rendered Horde_Form for posting a message                 or PEAR_Error object on error, or true in case of a                 successful post.</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">mixed</span>
		<span class="method-name">
			removeMessage
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$scope</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$forum_name</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$callback</span>, [<span class="var-type">array</span>&nbsp;<span class="var-name">$params</span> = <span class="var-default">array()</span>], [<span class="var-type">array</span>&nbsp;<span class="var-name">$variables</span> = <span class="var-default">null</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$scope</span><span class="var-description">: The application which is posting this message.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$forum_name</span><span class="var-description">: The unique name for the forum.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$callback</span><span class="var-description">: A callback method of the specified application                             that gets called to make sure that posting to                             this forum is allowed.</span>			</li>
					<li>
				<span class="var-type">array</span>
				<span class="var-name">$params</span><span class="var-description">: Any parameters for the forum message posting.  <pre> message_id        - An existing message to delete</pre></span>			</li>
					<li>
				<span class="var-type">array</span>
				<span class="var-name">$variables</span><span class="var-description">: A hash with all variables of a submitted form                             generated by this method.</span>			</li>
				</ul>
		
			
	</div>
<a name="methodrenderThreads" id="renderThreads"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">renderThreads</span> (line <span class="line-number">303</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Returns all threads of a forum in a threaded view.</p>
	<ul class="tags">
				<li><span class="field">return:</span> The HTML code of the thread view.</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">string</span>
		<span class="method-name">
			renderThreads
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$forum_name</span>, [<span class="var-type">boolean</span>&nbsp;<span class="var-name">$bodies</span> = <span class="var-default">false</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$scope</span> = <span class="var-default">'agora'</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$base_url</span> = <span class="var-default">null</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$template_file</span> = <span class="var-default">false</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$forum_name</span><span class="var-description">: The unique name for the forum.</span>			</li>
					<li>
				<span class="var-type">boolean</span>
				<span class="var-name">$bodies</span><span class="var-description">: Whether to include message bodies in the view.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$scope</span><span class="var-description">: The application that the specified forum belongs to.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$base_url</span><span class="var-description">: An alternate link where edit/delete/reply links                                 point to.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$template_file</span><span class="var-description">: Template file to use.</span>			</li>
				</ul>
		
			
	</div>
<a name="methodsaveForum" id="saveForum"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">saveForum</span> (line <span class="line-number">70</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Create or modify an agora forum. This is used for apps to create  forums for their own use. They will not show up in the regular  agora forum view since they will be using a datatree group  'agora.forums.&lt;sope&gt;'.</p>
	<ul class="tags">
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			saveForum
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$scope</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$parent</span>, <span class="var-type">array</span>&nbsp;<span class="var-name">$info</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$scope</span><span class="var-description">: The Horde application that is saving this forum.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$parent</span><span class="var-description">: The parent forum.</span>			</li>
					<li>
				<span class="var-type">array</span>
				<span class="var-name">$info</span><span class="var-description">: The forum information to save</span>			</li>
				</ul>
		
			
	</div>
						
		</div>
	</div>

	
	<p class="notes" id="credit">
		Documentation generated on Sun, 08 Nov 2009 14:24:35 +0000 by <a href="http://www.phpdoc.org" target="_blank">phpDocumentor 1.4.3</a>
	</p>
	</div></body>
</html>
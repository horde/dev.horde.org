<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
		<head>
			<!-- template designed by Marco Von Ballmoos  -->
			<title>Docs For Class Horde_Service_Facebook_Auth</title>
			<link rel="stylesheet" href="../media/stylesheet.css" />
						<script src="../media/lib/classTree.js"></script>
												<script language="javascript" type="text/javascript">
				var imgPlus = new Image();
				var imgMinus = new Image();
				imgPlus.src = "../media/images/plus.png";
				imgMinus.src = "../media/images/minus.png";
				
				function showNode(Node){
							switch(navigator.family){
								case 'nn4':
									// Nav 4.x code fork...
							var oTable = document.layers["span" + Node];
							var oImg = document.layers["img" + Node];
									break;
								case 'ie4':
									// IE 4/5 code fork...
							var oTable = document.all["span" + Node];
							var oImg = document.all["img" + Node];
									break;
								case 'gecko':
									// Standards Compliant code fork...
							var oTable = document.getElementById("span" + Node);
							var oImg = document.getElementById("img" + Node);
									break;
							}
					oImg.src = imgMinus.src;
					oTable.style.display = "block";
				}
				
				function hideNode(Node){
							switch(navigator.family){
								case 'nn4':
									// Nav 4.x code fork...
							var oTable = document.layers["span" + Node];
							var oImg = document.layers["img" + Node];
									break;
								case 'ie4':
									// IE 4/5 code fork...
							var oTable = document.all["span" + Node];
							var oImg = document.all["img" + Node];
									break;
								case 'gecko':
									// Standards Compliant code fork...
							var oTable = document.getElementById("span" + Node);
							var oImg = document.getElementById("img" + Node);
									break;
							}
					oImg.src = imgPlus.src;
					oTable.style.display = "none";
				}
				
				function nodeIsVisible(Node){
							switch(navigator.family){
								case 'nn4':
									// Nav 4.x code fork...
							var oTable = document.layers["span" + Node];
									break;
								case 'ie4':
									// IE 4/5 code fork...
							var oTable = document.all["span" + Node];
									break;
								case 'gecko':
									// Standards Compliant code fork...
							var oTable = document.getElementById("span" + Node);
									break;
							}
					return (oTable && oTable.style.display == "block");
				}
				
				function toggleNodeVisibility(Node){
					if (nodeIsVisible(Node)){
						hideNode(Node);
					}else{
						showNode(Node);
					}
				}
			</script>
					</head>
		<body>
			<div class="page-body">			
<h2 class="class-name"><img src="../media/images/Class_logo.png"
														alt=" Class"
														title=" Class"
														style="vertical-align: middle"> Horde_Service_Facebook_Auth</h2>

<a name="sec-description"></a>
<div class="info-box">
	<div class="info-box-title">Description</div>
	<div class="nav-bar">
					<span class="disabled">Description</span> |
													<a href="#sec-var-summary">Vars</a> (<a href="#sec-vars">details</a>)
						|											<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
						
											<a href="#sec-const-summary">Constants</a> (<a href="#sec-consts">details</a>)
						
			</div>
	<div class="info-box-body">
        		<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Horde_Service_Facebook_Auth:: wrap functionality associated with  authenticating to Facebook.</p>
<p class="description"><p>For now, only provide methods for authenticating that make sense from  within a Horde context.</p><p>Note, we don't extend Base since we are a special case in that not all  the info is set until *after* we are authenticated.</p><p>Copyright 2009 The Horde Project (http://www.horde.org)</p></p>
	<ul class="tags">
				<li><span class="field">author:</span> Michael J. Rubinsky &lt;<a href="mailto:mrubinsk@horde.org">mrubinsk@horde.org</a>&gt;</li>
			</ul>
		<p class="notes">
			Located in <a class="field" href="_Service_Facebook---lib---Horde---Service---Facebook---Auth.php.html">/Service_Facebook/lib/Horde/Service/Facebook/Auth.php</a> (line <span class="field">18</span>)
		</p>
		
				
		<pre></pre>
	
			</div>
</div>


	<a name="sec-const-summary"></a>
	<div class="info-box">
		<div class="info-box-title">Class Constant Summary</span></div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
						<span class="disabled">Constants</span> (<a href="#sec-consts">details</a>)
												<a href="#sec-var-summary">Vars</a> (<a href="#sec-vars">details</a>)
				 
				|
										| 
									<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
							
					</div>
		<div class="info-box-body">
			<div class="const-summary">
								<div class="const-title">
					<img src="../media/images/Constant.png" alt=" " />
					<a href="#EXTEND_PERMS_OFFLINE" title="details" class="const-name">EXTEND_PERMS_OFFLINE</a> = 					<span class="var-type"> 'offline_access'</span>

				</div>
								<div class="const-title">
					<img src="../media/images/Constant.png" alt=" " />
					<a href="#EXTEND_PERMS_PUBLISHSTREAM" title="details" class="const-name">EXTEND_PERMS_PUBLISHSTREAM</a> = 					<span class="var-type"> 'publish_stream'</span>

				</div>
								<div class="const-title">
					<img src="../media/images/Constant.png" alt=" " />
					<a href="#EXTEND_PERMS_READSTREAM" title="details" class="const-name">EXTEND_PERMS_READSTREAM</a> = 					<span class="var-type"> 'read_stream'</span>

				</div>
								<div class="const-title">
					<img src="../media/images/Constant.png" alt=" " />
					<a href="#EXTEND_PERMS_SHAREITEM" title="details" class="const-name">EXTEND_PERMS_SHAREITEM</a> = 					<span class="var-type"> 'share_item'</span>

				</div>
								<div class="const-title">
					<img src="../media/images/Constant.png" alt=" " />
					<a href="#EXTEND_PERMS_STATUSUPDATE" title="details" class="const-name">EXTEND_PERMS_STATUSUPDATE</a> = 					<span class="var-type"> 'status_update'</span>

				</div>
								<div class="const-title">
					<img src="../media/images/Constant.png" alt=" " />
					<a href="#EXTEND_PERMS_UPLOADPHOTO" title="details" class="const-name">EXTEND_PERMS_UPLOADPHOTO</a> = 					<span class="var-type"> 'photo_upload'</span>

				</div>
							</div>
		</div>
	</div>

	<a name="sec-var-summary"></a>
	<div class="info-box">
		<div class="info-box-title">Variable Summary</span></div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
						<span class="disabled">Vars</span> (<a href="#sec-vars">details</a>)
							| 
									<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
							
															<a href="#sec-const-summary">Constants</a> (<a href="#sec-consts">details</a>)
							
					</div>
		<div class="info-box-body">
			<div class="var-summary">
																																																								<div class="var-title">
					<img src="../media/images/Variable.png" alt=" " />
					<span class="var-type">string</span>
					<a href="#$_base_domain" title="details" class="var-name">$_base_domain</a>
				</div>
																<div class="var-title">
					<img src="../media/images/Variable.png" alt=" " />
					<span class="var-type"><a href="../Horde_Service_Facebook/Horde_Service_Facebook.html">Horde_Service_Facebook</a></span>
					<a href="#$_facebook" title="details" class="var-name">$_facebook</a>
				</div>
																<div class="var-title">
					<img src="../media/images/Variable.png" alt=" " />
					<span class="var-type">Horde_Controller_Request</span>
					<a href="#$_request" title="details" class="var-name">$_request</a>
				</div>
																<div class="var-title">
					<img src="../media/images/Variable.png" alt=" " />
					<span class="var-type">string</span>
					<a href="#$_sessionKey" title="details" class="var-name">$_sessionKey</a>
				</div>
																<div class="var-title">
					<img src="../media/images/Variable.png" alt=" " />
					<span class="var-type">string</span>
					<a href="#$_user" title="details" class="var-name">$_user</a>
				</div>
											</div>
		</div>
	</div>

	<a name="sec-method-summary"></a>
	<div class="info-box">
		<div class="info-box-title">Method Summary</span></div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
															<a href="#sec-const-summary">Constants</a> (<a href="#sec-consts">details</a>)
							
															<a href="#sec-var-summary">Vars</a> (<a href="#sec-vars">details</a>)
				 
				|
						<span class="disabled">Methods</span> (<a href="#sec-methods">details</a>)
		</div>
		<div class="info-box-body">			
			<div class="method-summary">
																																			
				<div class="method-definition">
					<img src="../media/images/StaticMethod.png" alt=" "/>
					static 						<span class="method-result">string</span>
										<a href="#generateSignature" title="details" class="method-name">generateSignature</a>
											(<span class="var-type"></span>&nbsp;<span class="var-name">$params_array</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$secret</span>, <span class="var-type">array</span>&nbsp;<span class="var-name">$params</span>)
									</div>
																																																																																																																																			
				<div class="method-definition">
					<img src="../media/images/Constructor.png" alt=" "/>
											<span class="method-result">unknown_type</span>
										<a href="#__construct" title="details" class="method-name">__construct</a>
											(<span class="var-type"></span>&nbsp;<span class="var-name">$facebook</span>, <span class="var-type"></span>&nbsp;<span class="var-name">$request</span>, [<span class="var-type"></span>&nbsp;<span class="var-name">$params</span> = <span class="var-default">array()</span>])
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">string</span>
										<a href="#createToken" title="details" class="method-name">createToken</a>
										()
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#expireSession" title="details" class="method-name">expireSession</a>
										()
									</div>
																							
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">string</span>
										<a href="#getAuthTokenUrl" title="details" class="method-name">getAuthTokenUrl</a>
										()
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">string</span>
										<a href="#getExtendedPermUrl" title="details" class="method-name">getExtendedPermUrl</a>
											(<span class="var-type">string</span>&nbsp;<span class="var-name">$perm</span>, [<span class="var-type">string</span>&nbsp;<span class="var-name">$success_url</span> = <span class="var-default">''</span>], [<span class="var-type">strint</span>&nbsp;<span class="var-name">$cancel_url</span> = <span class="var-default">''</span>])
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">integer</span>
										<a href="#getLoggedInUser" title="details" class="method-name">&amp;getLoggedInUser</a>
										()
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">string</span>
										<a href="#getLoginUrl" title="details" class="method-name">getLoginUrl</a>
											(<span class="var-type"></span>&nbsp;<span class="var-name">$next</span>)
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">array</span>
										<a href="#getSession" title="details" class="method-name">getSession</a>
											(<span class="var-type">string</span>&nbsp;<span class="var-name">$auth_token</span>)
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">string</span>
										<a href="#getSessionKey" title="details" class="method-name">getSessionKey</a>
										()
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">string</span>
										<a href="#getUser" title="details" class="method-name">getUser</a>
										()
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#revokeAuthorization" title="details" class="method-name">revokeAuthorization</a>
										()
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">unknown_type</span>
										<a href="#revokeExtendedPermission" title="details" class="method-name">revokeExtendedPermission</a>
											(<span class="var-type">$perm</span>&nbsp;<span class="var-name">$perm</span>, <span class="var-type">$uid</span>&nbsp;<span class="var-name">$uid</span>)
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#setCookies" title="details" class="method-name">setCookies</a>
											(<span class="var-type">string</span>&nbsp;<span class="var-name">$user</span>, <span class="var-type"></span>&nbsp;<span class="var-name">$sessionKey</span>, [<span class="var-type">timestamp</span>&nbsp;<span class="var-name">$expires</span> = <span class="var-default">null</span>], <span class="var-type">string</span>&nbsp;<span class="var-name">$session_key</span>)
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#setUser" title="details" class="method-name">setUser</a>
											(<span class="var-type">string</span>&nbsp;<span class="var-name">$user</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$sessionKey</span>, [<span class="var-type">timestamp</span>&nbsp;<span class="var-name">$expires</span> = <span class="var-default">null</span>], [<span class="var-type"></span>&nbsp;<span class="var-name">$no_cookie</span> = <span class="var-default">false</span>])
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">boolean</span>
										<a href="#validateSession" title="details" class="method-name">validateSession</a>
											([<span class="var-type">boolean</span>&nbsp;<span class="var-name">$ignore_cookies</span> = <span class="var-default">false</span>], [<span class="var-type">boolean</span>&nbsp;<span class="var-name">$resolve_auth_token</span> = <span class="var-default">true</span>])
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">boolean</span>
										<a href="#validateSignature" title="details" class="method-name">validateSignature</a>
											(<span class="var-type">array</span>&nbsp;<span class="var-name">$fb_params</span>, <span class="var-type">$expected_sig</span>&nbsp;<span class="var-name">$expected_sig</span>)
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">array</span>
										<a href="#_getParams" title="details" class="method-name">_getParams</a>
											(<span class="var-type">array</span>&nbsp;<span class="var-name">$params</span>, [<span class="var-type">int</span>&nbsp;<span class="var-name">$timeout</span> = <span class="var-default">null</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$namespace</span> = <span class="var-default">'fb_sig'</span>])
									</div>
											</div>
		</div>
	</div>		

	<a name="sec-vars"></a>
	<div class="info-box">
		<div class="info-box-title">Variables</div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
										<a href="#sec-var-summary">Vars</a> (<span class="disabled">details</span>)
						
			
												<a href="#sec-const-summary">Constants</a> (<a href="#sec-consts">details</a>)
							
										| 
									<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
							
					</div>
		<div class="info-box-body">
			
<a name="var$_base_domain" id="$_base_domain"><!-- --></A>
<div class="oddrow">

	<div class="var-header">
		<img src="../media/images/Variable.png" />
		<span class="var-title">
			<span class="var-type">string</span>
			<span class="var-name">$_base_domain</span>
						(line <span class="line-number">30</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
	<ul class="tags">
				<li><span class="field">access:</span> protected</li>
			</ul>
	
	
		
		

</div>
<a name="var$_facebook" id="$_facebook"><!-- --></A>
<div class="evenrow">

	<div class="var-header">
		<img src="../media/images/Variable.png" />
		<span class="var-title">
			<span class="var-type"><a href="../Horde_Service_Facebook/Horde_Service_Facebook.html">Horde_Service_Facebook</a></span>
			<span class="var-name">$_facebook</span>
						(line <span class="line-number">24</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
	<ul class="tags">
				<li><span class="field">access:</span> protected</li>
			</ul>
	
	
		
		

</div>
<a name="var$_request" id="$_request"><!-- --></A>
<div class="oddrow">

	<div class="var-header">
		<img src="../media/images/Variable.png" />
		<span class="var-title">
			<span class="var-type">Horde_Controller_Request</span>
			<span class="var-name">$_request</span>
						(line <span class="line-number">48</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
	<ul class="tags">
				<li><span class="field">access:</span> protected</li>
			</ul>
	
	
		
		

</div>
<a name="var$_sessionKey" id="$_sessionKey"><!-- --></A>
<div class="evenrow">

	<div class="var-header">
		<img src="../media/images/Variable.png" />
		<span class="var-title">
			<span class="var-type">string</span>
			<span class="var-name">$_sessionKey</span>
						(line <span class="line-number">35</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
	<ul class="tags">
				<li><span class="field">access:</span> protected</li>
			</ul>
	
	
		
		

</div>
<a name="var$_user" id="$_user"><!-- --></A>
<div class="oddrow">

	<div class="var-header">
		<img src="../media/images/Variable.png" />
		<span class="var-title">
			<span class="var-type">string</span>
			<span class="var-name">$_user</span>
						(line <span class="line-number">42</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">The current userid</p>
	<ul class="tags">
				<li><span class="field">access:</span> protected</li>
			</ul>
	
	
		
		

</div>
						
		</div>
	</div>
	
	<a name="sec-methods"></a>
	<div class="info-box">
		<div class="info-box-title">Methods</div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
															<a href="#sec-var-summary">Vars</a> (<a href="#sec-vars">details</a>)
																			<a href="#sec-const-summary">Constants</a> (<a href="#sec-consts">details</a>)
							
										<a href="#sec-method-summary">Methods</a> (<span class="disabled">details</span>)
						
		</div>
		<div class="info-box-body">
			<A NAME='method_detail'></A>
<a name="methodgenerateSignature" id="generateSignature"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../media/images/StaticMethod.png" />
		<span class="method-title">static generateSignature</span> (line <span class="line-number">382</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Generate a signature using the application secret key.</p>
<p class="description"><p>The only two entities that know your secret key are you and Facebook,  according to the Terms of Service. Since nobody else can generate  the signature, you can rely on it to verify that the information  came from Facebook.</p></p>
	<ul class="tags">
				<li><span class="field">return:</span> Hash to be checked against the FB provided signature.</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		static <span class="method-result">string</span>
		<span class="method-name">
			generateSignature
		</span>
					(<span class="var-type"></span>&nbsp;<span class="var-name">$params_array</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$secret</span>, <span class="var-type">array</span>&nbsp;<span class="var-name">$params</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">array</span>
				<span class="var-name">$params</span><span class="var-description">: An array of all Facebook-sent parameters, NOT                         INCLUDING the signature itself.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$secret</span><span class="var-description">: The application's secret key.</span>			</li>
					<li>
				<span class="var-type"></span>
				<span class="var-name">$params_array</span>			</li>
				</ul>
		
			
	</div>
<a name="method__construct" id="__construct"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../media/images/Constructor.png" />
		<span class="method-title">Constructor __construct</span> (line <span class="line-number">68</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">TODO: Probably abstract out a Base class for these?</p>
	<ul class="tags">
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">unknown_type</span>
		<span class="method-name">
			__construct
		</span>
					(<span class="var-type"></span>&nbsp;<span class="var-name">$facebook</span>, <span class="var-type"></span>&nbsp;<span class="var-name">$request</span>, [<span class="var-type"></span>&nbsp;<span class="var-name">$params</span> = <span class="var-default">array()</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type"></span>
				<span class="var-name">$facebook</span>			</li>
					<li>
				<span class="var-type"></span>
				<span class="var-name">$request</span>			</li>
					<li>
				<span class="var-type"></span>
				<span class="var-name">$params</span>			</li>
				</ul>
		
			
	</div>
<a name="methodcreateToken" id="createToken"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">createToken</span> (line <span class="line-number">171</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Creates an authentication token to be used as part of the desktop login  flow.  For more information, please see  http://wiki.developers.facebook.com/index.php/Auth.createToken.</p>
	<ul class="tags">
				<li><span class="field">return:</span> An authentication token.</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">string</span>
		<span class="method-name">
			createToken
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodexpireSession" id="expireSession"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">expireSession</span> (line <span class="line-number">198</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Invalidate the session currently being used, and clear any state  associated with it.</p>
	<ul class="tags">
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			expireSession
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodgetAuthTokenUrl" id="getAuthTokenUrl"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">getAuthTokenUrl</span> (line <span class="line-number">97</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Returns the URL for a user to obtain the auth token needed to generate an  infinite session for a web app.</p>
<p class="description"><p>http://www.sitepoint.com/article/developing-facebook-platform/  http://forum.developers.facebook.com/viewtopic.php?id=20223</p><p>This has been replaced by having the user grant &quot;offline access&quot;  to the application using extended permissions.</p></p>
	<ul class="tags">
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">string</span>
		<span class="method-name">
			getAuthTokenUrl
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodgetExtendedPermUrl" id="getExtendedPermUrl"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">getExtendedPermUrl</span> (line <span class="line-number">113</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Return the URL needed for approving an extendted permission.</p>
	<ul class="tags">
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">string</span>
		<span class="method-name">
			getExtendedPermUrl
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$perm</span>, [<span class="var-type">string</span>&nbsp;<span class="var-name">$success_url</span> = <span class="var-default">''</span>], [<span class="var-type">strint</span>&nbsp;<span class="var-name">$cancel_url</span> = <span class="var-default">''</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$perm</span><span class="var-description">: An EXTEND_PERMS_* constant</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$success_url</span><span class="var-description">: URL to redirect to on success</span>			</li>
					<li>
				<span class="var-type">strint</span>
				<span class="var-name">$cancel_url</span><span class="var-description">: URL to redirect to on cancel</span>			</li>
				</ul>
		
			
	</div>
<a name="methodgetLoggedInUser" id="getLoggedInUser"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">getLoggedInUser</span> (line <span class="line-number">488</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Returns the user corresponding to the current session object.</p>
	<ul class="tags">
				<li><span class="field">return:</span> User id</li>
				<li><span class="field">throws:</span> Horde_Service_Facebook_Exception</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">integer</span>
		<span class="method-name">
			&amp;getLoggedInUser
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodgetLoginUrl" id="getLoginUrl"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">getLoginUrl</span> (line <span class="line-number">79</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Return a valid FB login URL with necessary GET parameters appended.</p>
	<ul class="tags">
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">string</span>
		<span class="method-name">
			getLoginUrl
		</span>
					(<span class="var-type"></span>&nbsp;<span class="var-name">$next</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type"></span>
				<span class="var-name">$next</span>			</li>
				</ul>
		
			
	</div>
<a name="methodgetSession" id="getSession"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">getSession</span> (line <span class="line-number">148</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Returns the session information available after current user logs in.</p>
	<ul class="tags">
				<li><span class="field">return:</span> An assoc array containing session_key, uid</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">array</span>
		<span class="method-name">
			getSession
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$auth_token</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$auth_token</span><span class="var-description">: the token</span>			</li>
				</ul>
		
			
	</div>
<a name="methodgetSessionKey" id="getSessionKey"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">getSessionKey</span> (line <span class="line-number">126</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Getter</p>
	<ul class="tags">
				<li><span class="field">return:</span> The current session key</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">string</span>
		<span class="method-name">
			getSessionKey
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodgetUser" id="getUser"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">getUser</span> (line <span class="line-number">136</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Getter</p>
	<ul class="tags">
				<li><span class="field">return:</span> The current userid</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">string</span>
		<span class="method-name">
			getUser
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodrevokeAuthorization" id="revokeAuthorization"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">revokeAuthorization</span> (line <span class="line-number">468</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Revoke all application permissions for the current session user.</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			revokeAuthorization
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodrevokeExtendedPermission" id="revokeExtendedPermission"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">revokeExtendedPermission</span> (line <span class="line-number">449</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Revoke a previously authorizied extended permission</p>
	<ul class="tags">
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">unknown_type</span>
		<span class="method-name">
			revokeExtendedPermission
		</span>
					(<span class="var-type">$perm</span>&nbsp;<span class="var-name">$perm</span>, <span class="var-type">$uid</span>&nbsp;<span class="var-name">$uid</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">$perm</span>
				<span class="var-name">$perm</span>			</li>
					<li>
				<span class="var-type">$uid</span>
				<span class="var-name">$uid</span>			</li>
				</ul>
		
			
	</div>
<a name="methodsetCookies" id="setCookies"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">setCookies</span> (line <span class="line-number">402</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Set session cookies.</p>
	<ul class="tags">
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			setCookies
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$user</span>, <span class="var-type"></span>&nbsp;<span class="var-name">$sessionKey</span>, [<span class="var-type">timestamp</span>&nbsp;<span class="var-name">$expires</span> = <span class="var-default">null</span>], <span class="var-type">string</span>&nbsp;<span class="var-name">$session_key</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$user</span><span class="var-description">: FB userid</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$session_key</span><span class="var-description">: The current session key</span>			</li>
					<li>
				<span class="var-type">timestamp</span>
				<span class="var-name">$expires</span>			</li>
					<li>
				<span class="var-type"></span>
				<span class="var-name">$sessionKey</span>			</li>
				</ul>
		
			
	</div>
<a name="methodsetUser" id="setUser"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">setUser</span> (line <span class="line-number">430</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Set the current session user in the object and in a cookie.</p>
	<ul class="tags">
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			setUser
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$user</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$sessionKey</span>, [<span class="var-type">timestamp</span>&nbsp;<span class="var-name">$expires</span> = <span class="var-default">null</span>], [<span class="var-type"></span>&nbsp;<span class="var-name">$no_cookie</span> = <span class="var-default">false</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$user</span><span class="var-description">: The FB userid</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$sessionKey</span>			</li>
					<li>
				<span class="var-type">timestamp</span>
				<span class="var-name">$expires</span>			</li>
					<li>
				<span class="var-type"></span>
				<span class="var-name">$no_cookie</span>			</li>
				</ul>
		
			
	</div>
<a name="methodvalidateSession" id="validateSession"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">validateSession</span> (line <span class="line-number">237</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Attempt to create or obtain Facebook session parameters from data sent</p>
<p class="description"><p>to us by Facebook. This will come from $_POST, $_GET, or $_COOKIE,  in that order. $_POST and $_GET are always more up-to-date than cookies,  so we prefer those if they are available. Data obtained from Facebook  is always validated by checking the signature.</p><p>For nitty-gritty details of when each of these is used, check out  http://wiki.developers.facebook.com/index.php/Verifying_The_Signature</p></p>
	<ul class="tags">
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">boolean</span>
		<span class="method-name">
			validateSession
		</span>
					([<span class="var-type">boolean</span>&nbsp;<span class="var-name">$ignore_cookies</span> = <span class="var-default">false</span>], [<span class="var-type">boolean</span>&nbsp;<span class="var-name">$resolve_auth_token</span> = <span class="var-default">true</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">boolean</span>
				<span class="var-name">$ignore_cookies</span><span class="var-description">: Ignore any seemingly valid session                                      session data obtained from a cookie.                                      (Needed to allow us to overwrite a                                       stale value when we get a new token)</span>			</li>
					<li>
				<span class="var-type">boolean</span>
				<span class="var-name">$resolve_auth_token</span><span class="var-description">: Call auth.getSession if we have an                                      auth_token and no other parameters?</span>			</li>
				</ul>
		
			
	</div>
<a name="methodvalidateSignature" id="validateSignature"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">validateSignature</span> (line <span class="line-number">363</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Validates that a given set of parameters match their signature.</p>
<p class="description"><p>Parameters all match a given input prefix, such as &quot;fb_sig&quot;.</p></p>
	<ul class="tags">
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">boolean</span>
		<span class="method-name">
			validateSignature
		</span>
					(<span class="var-type">array</span>&nbsp;<span class="var-name">$fb_params</span>, <span class="var-type">$expected_sig</span>&nbsp;<span class="var-name">$expected_sig</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">array</span>
				<span class="var-name">$fb_params</span><span class="var-description">: An array of all Facebook-sent parameters, not                           including the signature itself.</span>			</li>
					<li>
				<span class="var-type">$expected_sig</span>
				<span class="var-name">$expected_sig</span><span class="var-description">: The expected result to check against.</span>			</li>
				</ul>
		
			
	</div>
<a name="method_getParams" id="_getParams"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">_getParams</span> (line <span class="line-number">321</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Get the signed parameters that were sent from Facebook. Validates the set  of parameters against the included signature.</p>
<p class="description"><p>Since Facebook sends data to your callback URL via unsecured means, the  signature is the only way to make sure that the data actually came from  Facebook. So if an app receives a request at the callback URL, it should  always verify the signature that comes with against your own secret key.  Otherwise, it's possible for someone to spoof a request by  pretending to be someone else, i.e.:       www.your-callback-url.com/?fb_user=10101</p><p>This is done automatically by verify_fb_params.</p></p>
	<ul class="tags">
				<li><span class="field">return:</span> The subset of parameters containing the given prefix,                 and also matching the signature associated with them or an                 empty array if the signature did not match.</li>
				<li><span class="field">access:</span> protected</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">array</span>
		<span class="method-name">
			_getParams
		</span>
					(<span class="var-type">array</span>&nbsp;<span class="var-name">$params</span>, [<span class="var-type">int</span>&nbsp;<span class="var-name">$timeout</span> = <span class="var-default">null</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$namespace</span> = <span class="var-default">'fb_sig'</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">array</span>
				<span class="var-name">$params</span><span class="var-description">: A hash of all external parameters.</span>			</li>
					<li>
				<span class="var-type">int</span>
				<span class="var-name">$timeout</span><span class="var-description">: Number of seconds that the args are good for.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$namespace</span><span class="var-description">: Prefix string for the set of parameters we                             want to verify(fb_sig or fb_post_sig).</span>			</li>
				</ul>
		
			
	</div>
						
		</div>
	</div>

	<a name="sec-consts"></a>
	<div class="info-box">
		<div class="info-box-title">Class Constants</div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
										<a href="#sec-var-summary">Constants</a> (<span class="disabled">details</span>)
						
			
												<a href="#sec-var-summary">Vars</a> (<a href="#sec-vars">details</a>)
														| 
									<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
							
					</div>
		<div class="info-box-body">
			<a name="constEXTEND_PERMS_OFFLINE" id="EXTEND_PERMS_OFFLINE"><!-- --></A>
<div class="evenrow">

	<div class="const-header">
		<img src="../media/images/Variable.png" />
		<span class="const-title">
			<span class="const-name">EXTEND_PERMS_OFFLINE</span>
			 = <span class="const-default"> 'offline_access'</span>
			(line <span class="line-number">51</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">EXTEND_PERMS constants *</p>
	
	
</div>
<a name="constEXTEND_PERMS_PUBLISHSTREAM" id="EXTEND_PERMS_PUBLISHSTREAM"><!-- --></A>
<div class="oddrow">

	<div class="const-header">
		<img src="../media/images/Variable.png" />
		<span class="const-title">
			<span class="const-name">EXTEND_PERMS_PUBLISHSTREAM</span>
			 = <span class="const-default"> 'publish_stream'</span>
			(line <span class="line-number">59</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
	
	
</div>
<a name="constEXTEND_PERMS_READSTREAM" id="EXTEND_PERMS_READSTREAM"><!-- --></A>
<div class="evenrow">

	<div class="const-header">
		<img src="../media/images/Variable.png" />
		<span class="const-title">
			<span class="const-name">EXTEND_PERMS_READSTREAM</span>
			 = <span class="const-default"> 'read_stream'</span>
			(line <span class="line-number">60</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
	
	
</div>
<a name="constEXTEND_PERMS_SHAREITEM" id="EXTEND_PERMS_SHAREITEM"><!-- --></A>
<div class="oddrow">

	<div class="const-header">
		<img src="../media/images/Variable.png" />
		<span class="const-title">
			<span class="const-name">EXTEND_PERMS_SHAREITEM</span>
			 = <span class="const-default"> 'share_item'</span>
			(line <span class="line-number">56</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
	
	
</div>
<a name="constEXTEND_PERMS_STATUSUPDATE" id="EXTEND_PERMS_STATUSUPDATE"><!-- --></A>
<div class="evenrow">

	<div class="const-header">
		<img src="../media/images/Variable.png" />
		<span class="const-title">
			<span class="const-name">EXTEND_PERMS_STATUSUPDATE</span>
			 = <span class="const-default"> 'status_update'</span>
			(line <span class="line-number">55</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
	
	
</div>
<a name="constEXTEND_PERMS_UPLOADPHOTO" id="EXTEND_PERMS_UPLOADPHOTO"><!-- --></A>
<div class="oddrow">

	<div class="const-header">
		<img src="../media/images/Variable.png" />
		<span class="const-title">
			<span class="const-name">EXTEND_PERMS_UPLOADPHOTO</span>
			 = <span class="const-default"> 'photo_upload'</span>
			(line <span class="line-number">57</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
	
	
</div>
						
		</div>
	</div>
	
	<p class="notes" id="credit">
		Documentation generated on Sun, 08 Nov 2009 15:29:42 +0000 by <a href="http://www.phpdoc.org" target="_blank">phpDocumentor 1.4.3</a>
	</p>
	</div></body>
</html>
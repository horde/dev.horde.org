<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
		<head>
			<!-- template designed by Marco Von Ballmoos  -->
			<title>Docs For Class Operator_Driver_asterisksql</title>
			<link rel="stylesheet" href="../media/stylesheet.css" />
						<script src="../media/lib/classTree.js"></script>
												<script language="javascript" type="text/javascript">
				var imgPlus = new Image();
				var imgMinus = new Image();
				imgPlus.src = "../media/images/plus.png";
				imgMinus.src = "../media/images/minus.png";
				
				function showNode(Node){
							switch(navigator.family){
								case 'nn4':
									// Nav 4.x code fork...
							var oTable = document.layers["span" + Node];
							var oImg = document.layers["img" + Node];
									break;
								case 'ie4':
									// IE 4/5 code fork...
							var oTable = document.all["span" + Node];
							var oImg = document.all["img" + Node];
									break;
								case 'gecko':
									// Standards Compliant code fork...
							var oTable = document.getElementById("span" + Node);
							var oImg = document.getElementById("img" + Node);
									break;
							}
					oImg.src = imgMinus.src;
					oTable.style.display = "block";
				}
				
				function hideNode(Node){
							switch(navigator.family){
								case 'nn4':
									// Nav 4.x code fork...
							var oTable = document.layers["span" + Node];
							var oImg = document.layers["img" + Node];
									break;
								case 'ie4':
									// IE 4/5 code fork...
							var oTable = document.all["span" + Node];
							var oImg = document.all["img" + Node];
									break;
								case 'gecko':
									// Standards Compliant code fork...
							var oTable = document.getElementById("span" + Node);
							var oImg = document.getElementById("img" + Node);
									break;
							}
					oImg.src = imgPlus.src;
					oTable.style.display = "none";
				}
				
				function nodeIsVisible(Node){
							switch(navigator.family){
								case 'nn4':
									// Nav 4.x code fork...
							var oTable = document.layers["span" + Node];
									break;
								case 'ie4':
									// IE 4/5 code fork...
							var oTable = document.all["span" + Node];
									break;
								case 'gecko':
									// Standards Compliant code fork...
							var oTable = document.getElementById("span" + Node);
									break;
							}
					return (oTable && oTable.style.display == "block");
				}
				
				function toggleNodeVisibility(Node){
					if (nodeIsVisible(Node)){
						hideNode(Node);
					}else{
						showNode(Node);
					}
				}
			</script>
					</head>
		<body>
			<div class="page-body">			
<h2 class="class-name"><img src="../media/images/Class_logo.png"
														alt=" Class"
														title=" Class"
														style="vertical-align: middle"> Operator_Driver_asterisksql</h2>

<a name="sec-description"></a>
<div class="info-box">
	<div class="info-box-title">Description</div>
	<div class="nav-bar">
					<span class="disabled">Description</span> |
													<a href="#sec-var-summary">Vars</a> (<a href="#sec-vars">details</a>)
						|											<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
						
					</div>
	<div class="info-box-body">
        		<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Operator storage implementation for PHP's PEAR database abstraction layer.</p>
<p class="description"><p>Required values for $params:<pre>      'phptype'       The database type (e.g. 'pgsql', 'mysql', etc.).
      'table'         The name of the foo table in 'database'.
      'charset'       The database's internal charset.</pre></p><p>Required by some database implementations:<pre>      'database'      The name of the database.
      'hostspec'      The hostname of the database server.
      'protocol'      The communication protocol ('tcp', 'unix', etc.).
      'username'      The username with which to connect to the database.
      'password'      The password associated with 'username'.
      'options'       Additional options to pass to the database.
      'tty'           The TTY on which to connect to the database.
      'port'          The port on which to connect to the database.</pre></p><p>The table structure can be created by the scripts/sql/operator_foo.sql  script.</p><p>$Horde: incubator/operator/lib/Driver/asterisksql.php,v 1.12 2009/05/31 17:14:08 bklang Exp $</p><p>Copyright 2008-2009 The Horde Project (http://www.horde.org/)</p><p>See the enclosed file COPYING for license information (GPL). If you  did not receive this file, see http://www.fsf.org/copyleft/gpl.html.</p></p>
	<ul class="tags">
				<li><span class="field">author:</span> Your Name &lt;<a href="mailto:you@example.com">you@example.com</a>&gt;</li>
			</ul>
		<p class="notes">
			Located in <a class="field" href="_operator---lib---Driver---asterisksql.php.html">/operator/lib/Driver/asterisksql.php</a> (line <span class="field">33</span>)
		</p>
		
				
		<pre><a href="../Operator/Operator_Driver.html">Operator_Driver</a>
   |
   --Operator_Driver_asterisksql</pre>
	
			</div>
</div>



	<a name="sec-var-summary"></a>
	<div class="info-box">
		<div class="info-box-title">Variable Summary</span></div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
						<span class="disabled">Vars</span> (<a href="#sec-vars">details</a>)
							| 
									<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
							
								</div>
		<div class="info-box-body">
			<div class="var-summary">
																																																<div class="var-title">
					<img src="../media/images/Variable.png" alt=" " />
					<span class="var-type">boolean</span>
					<a href="#$_connected" title="details" class="var-name">$_connected</a>
				</div>
																<div class="var-title">
					<img src="../media/images/Variable.png" alt=" " />
					<span class="var-type">DB</span>
					<a href="#$_db" title="details" class="var-name">$_db</a>
				</div>
																<div class="var-title">
					<img src="../media/images/Variable.png" alt=" " />
					<span class="var-type">array</span>
					<a href="#$_params" title="details" class="var-name">$_params</a>
				</div>
																<div class="var-title">
					<img src="../media/images/Variable.png" alt=" " />
					<span class="var-type">DB</span>
					<a href="#$_write_db" title="details" class="var-name">$_write_db</a>
				</div>
											</div>
		</div>
	</div>

	<a name="sec-method-summary"></a>
	<div class="info-box">
		<div class="info-box-title">Method Summary</span></div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
																		<a href="#sec-var-summary">Vars</a> (<a href="#sec-vars">details</a>)
				 
				|
						<span class="disabled">Methods</span> (<a href="#sec-methods">details</a>)
		</div>
		<div class="info-box-body">			
			<div class="method-summary">
																																																															
				<div class="method-definition">
					<img src="../media/images/Constructor.png" alt=" "/>
											<span class="method-result">Operator_Driver_asterisksql</span>
										<a href="#Operator_Driver_asterisksql" title="details" class="method-name">Operator_Driver_asterisksql</a>
											([<span class="var-type">array</span>&nbsp;<span class="var-name">$params</span> = <span class="var-default">array()</span>])
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#getAccountCodes" title="details" class="method-name">getAccountCodes</a>
										()
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">boolean</span>
										<a href="#_connect" title="details" class="method-name">_connect</a>
										()
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">boolean</span>
										<a href="#_disconnect" title="details" class="method-name">_disconnect</a>
										()
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">array|PEAR_Error</span>
										<a href="#_getMonthlyCallStats" title="details" class="method-name">_getMonthlyCallStats</a>
											(<span class="var-type">Horde_Date</span>&nbsp;<span class="var-name">$start</span>, <span class="var-type">Horde_Date</span>&nbsp;<span class="var-name">$end</span>, [<span class="var-type">string</span>&nbsp;<span class="var-name">$accountcode</span> = <span class="var-default">null</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$dcontext</span> = <span class="var-default">null</span>])
									</div>
															
				<div class="method-definition">
					<img src="../media/images/Method.png" alt=" "/>
											<span class="method-result">boolean|PEAR_Error</span>
										<a href="#_getRecords" title="details" class="method-name">_getRecords</a>
											(<span class="var-type"></span>&nbsp;<span class="var-name">$start</span>, <span class="var-type"></span>&nbsp;<span class="var-name">$end</span>, [<span class="var-type"></span>&nbsp;<span class="var-name">$accountcode</span> = <span class="var-default">null</span>], [<span class="var-type"></span>&nbsp;<span class="var-name">$dcontext</span> = <span class="var-default">null</span>], [<span class="var-type"></span>&nbsp;<span class="var-name">$rowstart</span> = <span class="var-default">0</span>], [<span class="var-type"></span>&nbsp;<span class="var-name">$rowlimit</span> = <span class="var-default">100</span>])
									</div>
											</div>
		</div>
	</div>		

	<a name="sec-vars"></a>
	<div class="info-box">
		<div class="info-box-title">Variables</div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
										<a href="#sec-var-summary">Vars</a> (<span class="disabled">details</span>)
						
			
										| 
									<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
							
					</div>
		<div class="info-box-body">
			
<a name="var$_connected" id="$_connected"><!-- --></A>
<div class="oddrow">

	<div class="var-header">
		<img src="../media/images/Variable.png" />
		<span class="var-title">
			<span class="var-type">boolean</span>
			<span class="var-name">$_connected</span>
			 = <span class="var-default"> false</span>			(line <span class="line-number">62</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Boolean indicating whether or not we're connected to the SQL server.</p>
	
	
		
		

</div>
<a name="var$_db" id="$_db"><!-- --></A>
<div class="evenrow">

	<div class="var-header">
		<img src="../media/images/Variable.png" />
		<span class="var-title">
			<span class="var-type">DB</span>
			<span class="var-name">$_db</span>
						(line <span class="line-number">47</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Handle for the current database connection.</p>
	
	
		
		

</div>
<a name="var$_params" id="$_params"><!-- --></A>
<div class="oddrow">

	<div class="var-header">
		<img src="../media/images/Variable.png" />
		<span class="var-title">
			<span class="var-type">array</span>
			<span class="var-name">$_params</span>
			 = <span class="var-default">array()</span>			(line <span class="line-number">40</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Hash containing connection parameters.</p>
	
	
		
		

</div>
<a name="var$_write_db" id="$_write_db"><!-- --></A>
<div class="evenrow">

	<div class="var-header">
		<img src="../media/images/Variable.png" />
		<span class="var-title">
			<span class="var-type">DB</span>
			<span class="var-name">$_write_db</span>
						(line <span class="line-number">55</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Handle for the current database connection, used for writing. Defaults  to the same handle as $_db if a separate write database is not required.</p>
	
	
		
		

</div>
						
		</div>
	</div>
	
	<a name="sec-methods"></a>
	<div class="info-box">
		<div class="info-box-title">Methods</div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
															<a href="#sec-var-summary">Vars</a> (<a href="#sec-vars">details</a>)
																	<a href="#sec-method-summary">Methods</a> (<span class="disabled">details</span>)
						
		</div>
		<div class="info-box-body">
			<A NAME='method_detail'></A>
<a name="methodOperator_Driver_asterisksql" id="Operator_Driver_asterisksql"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../media/images/Constructor.png" />
		<span class="method-title">Constructor Operator_Driver_asterisksql</span> (line <span class="line-number">69</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Constructs a new SQL storage object.</p>
	
	<div class="method-signature">
		<span class="method-result">Operator_Driver_asterisksql</span>
		<span class="method-name">
			Operator_Driver_asterisksql
		</span>
					([<span class="var-type">array</span>&nbsp;<span class="var-name">$params</span> = <span class="var-default">array()</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">array</span>
				<span class="var-name">$params</span><span class="var-description">: A hash containing connection parameters.</span>			</li>
				</ul>
		
			
	</div>
<a name="methodgetAccountCodes" id="getAccountCodes"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">getAccountCodes</span> (line <span class="line-number">342</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			getAccountCodes
		</span>
				()
			</div>
	
		
			
	</div>
<a name="method_connect" id="_connect"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">_connect</span> (line <span class="line-number">364</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Attempts to open a connection to the SQL server.</p>
	<ul class="tags">
				<li><span class="field">return:</span> True on success; exits (Horde::fatal()) on error.</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">boolean</span>
		<span class="method-name">
			_connect
		</span>
				()
			</div>
	
		
			
	</div>
<a name="method_disconnect" id="_disconnect"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">_disconnect</span> (line <span class="line-number">433</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Disconnects from the SQL server and cleans up the connection.</p>
	<ul class="tags">
				<li><span class="field">return:</span> True on success, false on failure.</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">boolean</span>
		<span class="method-name">
			_disconnect
		</span>
				()
			</div>
	
		
			
	</div>
<a name="method_getMonthlyCallStats" id="_getMonthlyCallStats"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">_getMonthlyCallStats</span> (line <span class="line-number">193</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Get summary call statistics per-month for a given time range, account and  destination.</p>
	<ul class="tags">
				<li><span class="field">return:</span> Array of call statistics.  The key of each                               element is the month name in date('Y-m')                               format and the value being an array of                               statistics for calls placed that month. This                               method will additionall return PEAR_Error                               on failure.</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">array|PEAR_Error</span>
		<span class="method-name">
			_getMonthlyCallStats
		</span>
					(<span class="var-type">Horde_Date</span>&nbsp;<span class="var-name">$start</span>, <span class="var-type">Horde_Date</span>&nbsp;<span class="var-name">$end</span>, [<span class="var-type">string</span>&nbsp;<span class="var-name">$accountcode</span> = <span class="var-default">null</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$dcontext</span> = <span class="var-default">null</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">Horde_Date</span>
				<span class="var-name">$start</span><span class="var-description">: startdate  Start of the statistics window</span>			</li>
					<li>
				<span class="var-type">Horde_Date</span>
				<span class="var-name">$end</span><span class="var-description">: enddate    End of the statistics window</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$accountcode</span><span class="var-description">: accountcode    Name of the accont for statistics.  Defaults                               to null meaning all accounts.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$dcontext</span><span class="var-description">: dcontext       Destination of calls.  Defaults to null.</span>			</li>
				</ul>
		
			
	</div>
<a name="method_getRecords" id="_getRecords"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../media/images/Method.png" />
		<span class="method-title">_getRecords</span> (line <span class="line-number">79</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Get call detail records from the database</p>
	<ul class="tags">
				<li><span class="field">return:</span> True on success, PEAR_Error on failure.</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">boolean|PEAR_Error</span>
		<span class="method-name">
			_getRecords
		</span>
					(<span class="var-type"></span>&nbsp;<span class="var-name">$start</span>, <span class="var-type"></span>&nbsp;<span class="var-name">$end</span>, [<span class="var-type"></span>&nbsp;<span class="var-name">$accountcode</span> = <span class="var-default">null</span>], [<span class="var-type"></span>&nbsp;<span class="var-name">$dcontext</span> = <span class="var-default">null</span>], [<span class="var-type"></span>&nbsp;<span class="var-name">$rowstart</span> = <span class="var-default">0</span>], [<span class="var-type"></span>&nbsp;<span class="var-name">$rowlimit</span> = <span class="var-default">100</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type"></span>
				<span class="var-name">$start</span>			</li>
					<li>
				<span class="var-type"></span>
				<span class="var-name">$end</span>			</li>
					<li>
				<span class="var-type"></span>
				<span class="var-name">$accountcode</span>			</li>
					<li>
				<span class="var-type"></span>
				<span class="var-name">$dcontext</span>			</li>
					<li>
				<span class="var-type"></span>
				<span class="var-name">$rowstart</span>			</li>
					<li>
				<span class="var-type"></span>
				<span class="var-name">$rowlimit</span>			</li>
				</ul>
		
			
	</div>
							<h4>Inherited Methods</h4>
				<a name='inherited_methods'><!-- --></a>	
									<!-- =========== Summary =========== -->
					<p>Inherited From <span class="classname"><a href="../Operator/Operator_Driver.html">Operator_Driver</a></span></p>
					<blockquote>
													<img src="../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../Operator/Operator_Driver.html#methodfactory">Operator_Driver::factory()</a></span><br>
													<img src="../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../Operator/Operator_Driver.html#methodgetMonthlyCallStats">Operator_Driver::getMonthlyCallStats()</a></span><br>
													<img src="../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../Operator/Operator_Driver.html#methodgetRecords">Operator_Driver::getRecords()</a></span><br>
											</blockquote>
										
		</div>
	</div>

	
	<p class="notes" id="credit">
		Documentation generated on Sun, 08 Nov 2009 14:47:19 +0000 by <a href="http://www.phpdoc.org" target="_blank">phpDocumentor 1.4.3</a>
	</p>
	</div></body>
</html>